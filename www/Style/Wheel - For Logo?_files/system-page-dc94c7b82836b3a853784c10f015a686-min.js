YUI.add("squarespace-dialog-html",function(a){a.namespace("Squarespace.DialogFields");var c=a.Squarespace.DialogFields.HTML=a.Base.create("html",a.Squarespace.DialogField2,[],{bindUI:function(){c.superclass.bindUI.call(this);this._registerEvent(this.after("contentChange",this.syncUI,this))},syncUI:function(){c.superclass.syncUI.call(this);this.get("contentBox").setHTML(this.get("content"))},focus:null,blur:null,enable:null,disable:null},{CSS_PREFIX:"sqs-html",ATTRS:{content:{value:""},focusable:{value:!1}}})},
"1.0",{requires:["base","squarespace-dialog-field-2"]});
YUI.add("squarespace-widgets-member-account-template",function(a){var c=a.Handlebars;(function(){var a=c.template;(c.templates=c.templates||{})["widgets-member-account.html"]=a(function(a,b,f,c,g){this.compilerInfo=[4,">= 1.0.0"];f=this.merge(f,a.helpers);g=g||{};var k=this.escapeExpression;a='  <div class="profile-image">\n    <img src="';(c=f.avatarAssetUrl)?c=c.call(b,{hash:{},data:g}):(c=b.avatarAssetUrl,c="function"===typeof c?c.apply(b):c);a+=k(c)+'" alt="User Avatar" height="100" width="100">\n  </div>\n\n  <div class="profile-info">\n    <span class="name">';
(c=f.displayName)?c=c.call(b,{hash:{},data:g}):(c=b.displayName,c="function"===typeof c?c.apply(b):c);a+=k(c)+'</span>\n    <span class="email">';(c=f.email)?c=c.call(b,{hash:{},data:g}):(c=b.email,c="function"===typeof c?c.apply(b):c);return a+=k(c)+"</span>\n  </div>\n"})})();a.Handlebars.registerPartial("widgets-member-account.html".replace("/","."),c.templates["widgets-member-account.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-v5login-utils",function(a){a.namespace("Squarespace.Auth");a.Squarespace.Auth.loginV5=function(c,b){return new a.Promise(function(d,h){a.Data.post({xdr:{credentials:!0},url:"http://squarespace5.squarespace.com/process/service/CredentialCheck",data:{A:c,B:b,from6:!0},success:function(f){a.Data.post({xdr:{credentials:!0},url:"http://"+c+".squarespace.com/process/Login",data:{username:c,encryptedPassword:b,from6:!0},success:function(a){"success"===a.result?d({type:"v5",url:"http://"+
c+".squarespace.com"}):h({type:"v5",error:"unkown error"})},failure:function(a){a.type="v5";h(a)}},this)},failure:function(b){b.type="v5";b.errors?(a.Object.each(b.errors,function(a,d){b.errors[d]=a.replace(/support@squarespace.com/g,"customercare@squarespace.com")}),h(b)):h({error:"There was an unexpected error. Please try again later."})}},this)})}},"1.0",{requires:["promise","squarespace-util"]});YUI.add("squarespace-responsive-modal",function(a){},"1.0",{requires:["base"]});
YUI.add("squarespace-models-google-domain",function(a){var c=a.namespace("Squarespace.Models");c.GoogleDomain=a.Base.create("googleDomain",c.Domain,[],{root:a.Squarespace.REST_API_ROOT+"domains/google",isNew:function(){return a.Lang.isValue(this.get("googleAuthRequestId"))}},{ATTRS:{googleAuthRequestId:{validator:a.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","squarespace-models-domain"]});
YUI.add("squarespace-widgets-model",function(a){a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.Model=a.Base.create("Model",a.Squarespace.Widgets.SSWidget,[a.WidgetChild],{bindUI:function(){c.superclass.bindUI.call(this);this._registerEvent(this.get("model").after("change",this.syncUI,this))},_getHBTemplateContext:function(){var a=c.superclass._getHBTemplateContext.call(this);a.model=a.model.toJSON();return a}},{CSS_PREFIX:"sqs-model",ATTRS:{model:{valueFn:function(){return new a.Model},
validator:a.Squarespace.AttrValidators.isInstanceOf(a.Model),writeOnce:"initOnly"}}})},"1.0",{requires:["base","model","widget-child","squarespace-attr-validators","squarespace-ss-widget"]});
YUI.add("squarespace-autocomplete-types",function(a){a.namespace("Squarespace.Constants").AutocompleteTypes={GIVEN_NAME:"given-name",FAMILY_NAME:"family-name",CITY:"city",STATE:"state",POSTAL_CODE:"postal-code",COUNTRY_NAME:"country-name",CC_FULL_NAME:"cc-full-name",CC_NUMBER:"cc-number",CC_EXP_MOTNH:"cc-exp-month",CC_EXP_YEAR:"cc-exp-year",CC_CSC:"cc-csc"};a.Squarespace.AutocompleteTypeATTR={value:null,writeOnce:"initOnly",validator:function(c){if(a.Lang.isNull(c)||a.Object.hasValue(a.Squarespace.Constants.AutocompleteTypes,
c))return!0;console.warn(this.name+": That constant is not an available autocomplete type.");return!1}}},"1.0");
YUI.add("squarespace-dialog-multi-option",function(a){var c=a.namespace("Squarespace.DialogFields").MultiOption=a.Base.create("multiOption",a.Squarespace.DialogField2,[],{initializer:function(b){this.get("data");!this.get("data")&&!a.Lang.isUndefined(b.defaultValue)&&this.set("data",b.defaultValue);this._selectedOptionEl=null},renderUI:function(){c.superclass.renderUI.call(this);this._calculateMargins();this._renderTitle();this._renderOptions()},bindUI:function(){this.get("contentBox").delegate("click",
this._onOptionClick,".option",this);this.after("optionsChange",this._renderOptions,this);this.after("stringsChange",this._renderTitle,this)},syncUI:function(){c.superclass.syncUI.call(this);this._setupOptionWidths()},getBBInnerWidth:function(){var a=this.get("boundingBox");return a.get("offsetWidth")-(parseInt(a.getComputedStyle("paddingLeft"),10)+parseInt(a.getComputedStyle("paddingRight"),10))},selectOption:function(a){this.get("contentBox").all(".option").each(function(d){this._optionMatchesData(d,
a)&&this._selectOption(d)},this)},addOption:function(a){a=this.get("options");a.push(optionOjb);this.set("options",a)},_renderTitle:function(){var b=this.get("strings.title"),d=this.get("contentBox"),c=d.one(".title");b&&a.Lang.isNull(c)?d.append(a.Node.create('<div class="title">'+this.get("strings.title")+"</div>")):b?c.setHTML(this.get("strings.title")):!b&&!a.Lang.isNull(c)&&c.remove()},_renderOptions:function(){var b=this.get("contentBox"),d=this.get("options"),c=this._getOptionWidth();b.all(".option").remove();
a.Array.each(d,function(d){if(d.section)b.append(a.Node.create('<div class="option-label">'+d.section+"</div>"));else{var e=a.Node.create(a.Lang.sub('<div class="option" data-value="{value}"><div class="option-content"><div class="option-title">{title}</div></div></div>',d));e.setData(d);e.setStyles({width:c});var g=d.description;g&&e.one(".option-content").append(a.Node.create('<div class="option-description">'+g+"</div>"));d.icon?e.addClass("icon-"+d.icon):e.addClass("no-icon");b.append(e);this._optionMatchesData(e)&&
this._markSelected(e);d.upgradeLocked&&(e.addClass("upgrade-locked"),new a.Squarespace.ToolTip({target:".option.upgrade-locked",title:"Upgrade to Connect",body:"You must be on the Business Plan to use this feature.",dialogTooltip:!0,showTimeout:350}),e.on("click",function(){(new a.Squarespace.Widgets.Confirmation({"strings.cancel":"Not Now","strings.confirm":"Go to Upgrade","strings.title":"Do you want to upgrade?","strings.message":"Upgrading to the Business Plan will enable this feature."})).on("confirm",
d.upgradeConfirmCb)}))}},this)},_selectOptions:function(){this.get("contentBox").all(".option").each(function(a){this._optionMatchesData(a)&&this._selectOption(a)},this)},_optionMatchesData:function(b,d){a.Lang.isUndefined(d)&&(d=this.get("data"));var c=b.getData("value");if(this.get("numeric"))return d===a.Number.parse(c);a.Lang.isObject(c)&&a.Lang.isObject(d)&&console.warn("Trying to compare to objects, which is a bit out of scope.");return d===c},_onOptionClick:function(b){b.halt();b=b.target.hasClass("option")?
b.target:b.target.ancestor(".option");var d=this.get("optionClickCb");b.hasClass("upgrade-locked")||this._selectOption(b);a.Lang.isFunction(d)&&d(this.get("data"))},_markSelected:function(a){a!=this._selectedOptionEl&&(this._selectedOptionEl&&this._selectedOptionEl.removeClass("selected"),a.addClass("selected"),this._selectedOptionEl=a)},_selectOption:function(b){if(b!=this._selectedOptionEl){this._markSelected(b);b=b.getData("value");if(this.get("numeric")){var d=a.Number.parse(b);a.Lang.isNumber(d)&&
(b=d)}this.set("data",b);this.get("submitOnSelect")&&(b=this.get("dialog"),a.Lang.isValue(b)&&b.saveAndClose())}},_getOptionWidth:function(){var b=this.get("optionWidth");if(a.Lang.isValue(b))return b;b=this.get("options");b=parseInt(this.get("columns"),10)||b.length;return this.getBBInnerWidth()/b-this.get("marginOffset")},_calculateMargins:function(){var b=a.Node.create('<div class="option" style="visibility:hidden;"></div>');this.get("contentBox").append(b);var d=parseInt(b.getStyle("marginLeft"),
10),c=parseInt(b.getStyle("marginRight"),10);this.set("marginOffset",d+c);b.remove()},_setupOptionWidths:function(){var a=this.get("columns")||this.get("options").length;0<parseInt(a,10)&&this.get("boundingBox").addClass("columns-"+a);this.get("contentBox").all(".option").setStyle("width",this._getOptionWidth())}},{CSS_PREFIX:"sqs-multi-option",ATTRS:{data:{setter:function(b){return this.get("numeric")?a.Number.parse(b):b}},options:{value:null},optionClickCb:{value:null,setter:function(b){return!a.Lang.isFunction(b)?
null:b}},optionWidth:{value:null},submitOnSelect:{value:!1},columns:{value:null},marginOffset:{value:0,validator:a.Lang.isNumber},numeric:{value:!1,validator:a.Lang.isBoolean},readOnly:{value:!0}}})},"1.0",{requires:["base","datatype-number-parse","squarespace-dialog-field-2","squarespace-widgets-confirmation"]});
YUI.add("squarespace-google-domains-consent-service",function(a){a.namespace("Squarespace");a.Squarespace.GoogleDomainsConsentService=new (a.Base.create("domainConsentService",a.Base,[],{initializer:function(){this._openWindows={};this._messageCallbacks={};this._messageEventHandler=window.addEventListener("message",a.bind(this._routeMessage,this))},destructor:function(){window.removeEventListener("message",this._messageEventHandler);this._endMonitor()},getConsent:function(c,b,d){return a.Squarespace.Promises.create(function(a,
f){this._messageCallbacks[c]=function(d){d.consentGranted?a({requestId:d.requestId}):f()};this._openConsentWindow(c,b,d)},this)},getConsentForNewSite:function(c,b){return a.Squarespace.Promises.create(function(a,h){this._messageCallbacks[c]=function(b){b.consentGranted?a({requestId:b.requestId}):h()};this._openSignupConsentWindow(c,b)},this)},getDomainOnlyConsent:function(c,b,d){return a.Squarespace.Promises.create(function(a,f){this._messageCallbacks[c]=function(d){d.consentGranted?a({requestId:d.requestId}):
f()};this._openDomainConsentOnlyWindow(c,b,d)},this)},getConsentForList:function(){return a.Squarespace.Promises.create(function(c,b){var d=a.guid();this._messageCallbacks[d]=function(a){a.consentGranted?c({requestId:a.requestId}):b()};this._openListConsentWindow(d)},this)},_routeMessage:function(c){var b=c.data.domain;if(a.Lang.isString(b)){var d=this._messageCallbacks[b];a.Lang.isFunction(d)&&(d.call(this,c.data),delete this._messageCallbacks[b])}},_registerOpenWindow:function(c,b){0>=a.Object.size(this._openWindows)&&
this._beginMonitor();this._openWindows[c]=b},_unregisterOpenWindow:function(c){delete this._openWindows[c];0>=a.Object.size(this._openWindows)&&this._endMonitor()},_endMonitor:function(){this._monitor&&this._monitor.cancel()},_beginMonitor:function(){this._monitor=a.later(300,this,function(){var c=[];a.Object.each(this._openWindows,function(a,d){a.closed&&(this._routeMessage({data:{domain:d,consentGranted:!1}}),c.push(d))},this);a.Array.each(c,this._unregisterOpenWindow,this)},null,!0)},_openListConsentWindow:function(c){var b=
a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/list-domains-consent-initialize?requestIdentifier={identifier}",{identifier:c,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(b,c)},_openDomainConsentOnlyWindow:function(c,b,d){b=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/domain-consent-initialize?domain={domain}&requestId={requestId}",{requestId:b,domain:c,websiteId:d,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});this._openConsentPopup(b,c)},
_openConsentWindow:function(c,b,d){b=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/consent-initialize?domain={domain}&websiteId={websiteId}&userId={userId}",{domain:c,appDomain:Static.SQUARESPACE_CONTEXT.appDomain,websiteId:d||"",userId:b});this._openConsentPopup(b,c)},_openSignupConsentWindow:function(c,b){var d=a.Lang.sub("https://oauth.{appDomain}/auth/google-web-hosting/signup-consent-initialize?domain={domain}&userId={userId}",{domain:c,userId:b,appDomain:Static.SQUARESPACE_CONTEXT.appDomain});
this._openConsentPopup(d,c)},_openConsentPopup:function(a,b){var d=window.open(a,"Google Domains Consent","status=0,width=1020,height=520");this._registerOpenWindow(b,d)}}))},"1.0",{requires:["base","promise","squarespace-promises"]});
YUI.add("squarespace-dialog-check",function(a){a.namespace("Squarespace.DialogFields");var c=function(a,d){return function(c){c.halt();a.call(d,c)}};a.Squarespace.DialogFields.Check=a.Base.create("check",a.Squarespace.DialogField2,[],{initializer:function(b){!a.Lang.isValue(b.data)&&a.Lang.isValue(b.defaultValue)&&this.set("data",b.defaultValue)},bindUI:function(){a.Squarespace.DialogFields.Check.superclass.bindUI.call(this);this.get("boundingBox").on("tap",c(this._toggleActive,this));this.get("boundingBox").after("mousedown",
function(a){a.halt()},this)},syncUI:function(){a.Squarespace.DialogFields.Check.superclass.syncUI.call(this);this.get("contentBox").setHTML(this.renderTemplate());a.Lang.isValue(this.get("strings.description"))?this.get("boundingBox").addClass("has-description"):this.get("boundingBox").addClass("has-no-description")},_toggleActive:function(){this.set("data",!this.get("data"))}},{CSS_PREFIX:"sqs-check",HANDLEBARS_TEMPLATE:"dialog-check.html",ATTRS:{data:{value:!1}}})},"1.0",{requires:["base","base-build",
"event-tap","squarespace-dialog-field-2","squarespace-dialog-check-template"]});
YUI.add("squarespace-dialog-hidden",function(a){var c=function(){};a.namespace("Squarespace.DialogFields").Hidden=a.Base.create("hidden",a.Squarespace.DialogField2,[],{initializer:function(){this.unplug(a.Plugin.WidgetAnim)},focus:null,enable:null,disable:null,blur:null,renderUI:c,bindUI:c,syncUI:c},{CSS_PREFIX:"sqs-hidden",ATTRS:{visible:{value:!1},focusable:{value:!1}}});a.Squarespace.DialogFields.HiddenField=a.Squarespace.DialogFields.Hidden},"1.0",{requires:["base","base-build","squarespace-dialog-field-2"]});
YUI.add("squarespace-google-domains-utils",function(a){a.namespace("Squarespace.GoogleDomains");var c=function(b){a.Lang.isString(b)||(b="");(new a.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:'<div class="bigtext"><div class="title">Failed to add domain</div><div class="description">'+b+'</div><div class="buttons"></div></div>',margin:100,noHeightConstrain:!0})).show()};a.Squarespace.GoogleDomains.getGoogleDomainUrlParams=function(){var b=window.location.search;return{userId:a.QueryString.parse(b.substr(1)).userId||
null,domainName:a.QueryString.parse(b.substr(1)).domainName||null}};a.Squarespace.GoogleDomains.isGoogleDomainFlow=function(){var b=a.Squarespace.SessionStorage.getSessionData("googleDomain");if(a.Lang.isObject(b))return!0;b=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams();return!a.Lang.isNull(b.userId)&&!a.Lang.isNull(b.domainName)?!0:!1};a.Squarespace.GoogleDomains.showConfirmMessage=function(b,d){var c=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams(),f=c.domainName,e=c.userId,c="http://"+
window.location.hostname,g=new a.Squarespace.Lightbox({disableNormalClose:!0,clickAnywhereToExit:!1,content:'<div class="bigtext"><div class="title">Link Domain: '+encodeURI(f)+'</div><div class="description">Your site <strong>'+c+"</strong> will be available at <strong>http://www."+f+'</strong>.</div><div class="buttons"><input type="button" class="login-button" name="login" value="Link Domain"/></div></div>',noHeightConstrain:!0});g.show();g.getContentEl().on("click",function(){g.hide();d(b,e,f)})};
a.Squarespace.GoogleDomains.startConsentFlow=function(b,d,h){var f=new a.Squarespace.Spinner({color:"light",size:"large",render:a.one(".spinner-wrapper")});f.spin();a.Squarespace.Analytics.trackInternal("domain_link_google_domain_start");return a.Squarespace.GoogleDomainsConsentService.getConsent(h,d,b).then(function(d){(new a.Squarespace.Models.GoogleDomain({googleAuthRequestId:d.requestId})).save({},function(d){f.stop();a.Lang.isValue(d)?c(d.responseJSON.message):window.location="/config#module=settings&settings-subpanelName=domain-settings"})},
function(d){a.Squarespace.Analytics.trackInternal("domain_link_domain_failure",{host:"google"});f.stop();c(d)})}},"1.0",{requires:["querystring","squarespace-google-domains-consent-service","squarespace-models-google-domain","squarespace-session-storage"]});
YUI.add("squarespace-trial-login-dialog",function(a){var c=a.namespace("Squarespace.Widgets").TrialLoginDialog=a.Base.create("trialLoginDialog",a.Squarespace.Widgets.ModalDialog,[],{initializer:function(){this._expectedAnswer=this._generateCaptcha();this._captcha=new a.Squarespace.DialogFields.HTML({content:this._expectedAnswer,className:"captcha"});this._description=new a.Squarespace.DialogFields.HTML({content:this.get("strings.description"),className:"description"});this._captchaEntry=new a.Squarespace.DialogFields.Text({name:"captcha",
submitOnEnter:!0,"strings.placeholder":"Type the word above...",className:"captcha-entry-field"});this.add(this._description);this.add(this._captcha);this.add(this._captchaEntry)},bindUI:function(){c.superclass.bindUI.call(this);var a=this.get("contentBox");a.delegate("click",this._fadeAndDestroy,".cancel",this);a.delegate("click",this._authenticate,".submit",this);this._captchaEntry.on("submit",this._authenticate,this)},_authenticate:function(){var b=this._captchaEntry.get("data");if(!a.Lang.isValue(b)||
""===b)this._captchaEntry.showError("Required field");else{var b=b.trim().toLowerCase(),d=this._expectedAnswer.toLowerCase();b!==d?this._captchaEntry.showError("That's not the right word."):this._submitAuthRequest()}},_submitAuthRequest:function(){a.Data.post({url:"/api/auth/AuthenticateAsVisitor",success:function(b){b=Math.floor(99999999*Math.random()+1);b=a.Squarespace.UrlUtils.addQueryParam(a.config.win.location.href,"r",b);a.config.win.location.href=b}},this)},_generateCaptcha:function(){for(var a=
"",d=0;5>d;d++)a+="ABCDEFGHJKLMNOPQRSTUVWXYZ".charAt(Math.floor(25*Math.random()));return a}},{CSS_PREFIX:"sqs-trial-login-dialog",ATTRS:{strings:{value:{title:"Visitor Access",description:"This website is in trial mode and has not yet launched. To log into this trial website, type this word in the box below."}},buttons:{value:['<a href="#" class="cancel">Cancel</a>','<span class="submit button-light">View Website</span>']}}})},"1.0",{requires:["base","squarespace-modal-dialog","squarespace-dialog-text",
"squarespace-dialog-html","squarespace-dialog-button"]});
YUI.add("squarespace-widgets-website",function(a){a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.Website=a.Base.create("Website",a.Squarespace.Widgets.Model,[],{renderUI:function(){c.superclass.renderUI.call(this)},bindUI:function(){c.superclass.bindUI.call(this);this.get("boundingBox").on("click",function(){this.set("selected",1)},this)},_getHBTemplateContext:function(){return this.get("model").toJSON()}},{CSS_PREFIX:"sqs-website",HANDLEBARS_TEMPLATE:"widgets-website.html"})},"1.0",
{requires:["base","squarespace-util","squarespace-widgets-model","squarespace-widgets-website-template"]});
YUI.add("squarespace-dialog-text-template",function(a){var c=a.Handlebars;(function(){var a=c.template;(c.templates=c.templates||{})["dialog-text.html"]=a(function(a,b,c,e,g){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);g=g||{};a="";var k,m=this.escapeExpression;if((e=c["if"].call(b,(k=b.strings,null==k||!1===k?k:k.title),{hash:{},inverse:this.noop,fn:this.program(1,function(a,d){var b,c;return b=""+('\n  <div class="title">'+m((c=(c=a.strings,null==c||!1===c?c:c.title),"function"===
typeof c?c.apply(a):c))+"</div>\n")},g),data:g}))||0===e)a+=e;a+='\n\n<input type="text" ';if((e=c["if"].call(b,b.maxLength,{hash:{},inverse:this.noop,fn:this.program(3,function(a,d){var b,e;b='maxlength="';(e=c.maxLength)?e=e.call(a,{hash:{},data:d}):(e=a.maxLength,e="function"===typeof e?e.apply(a):e);return b+=m(e)+'"'},g),data:g}))||0===e)a+=e;a+="\n       ";if((e=c["if"].call(b,b.readOnly,{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){return'readonly="readonly"'},g),data:g}))||0===
e)a+=e;a+="\n       ";if((e=c["if"].call(b,b.selectAllOnFocus,{hash:{},inverse:this.noop,fn:this.program(7,function(a,b){return'onClick="this.select()"'},g),data:g}))||0===e)a+=e;a+="/>\n\n";if((e=c["if"].call(b,(k=b.strings,null==k||!1===k?k:k.description),{hash:{},inverse:this.noop,fn:this.program(9,function(a,b){var d,c,f;d='\n\n\t<div class="description">\n    ';if((f=(c=(c=a.strings,null==c||!1===c?c:c.description),"function"===typeof c?c.apply(a):c))||0===f)d+=f;return d+"\n  </div>\n\n"},g),
data:g}))||0===e)a+=e;return a+"\n"})})();a.Handlebars.registerPartial("dialog-text.html".replace("/","."),c.templates["dialog-text.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-models-domain",function(a){var c=a.Base.create("domain",a.Model,[a.Squarespace.ModelSync.REST],{url:a.Squarespace.REST_API_ROOT+"domains/{id}",root:a.Squarespace.REST_API_ROOT+"domains",getUnlockKey:function(){return new a.Promise(a.bind(function(b,d){a.Data.get({url:this.getURL("update")+"/unlock-key",success:function(a){b(a.key)},failure:d},this)},this))}},{ATTRS:{websiteId:{validator:a.Lang.isString},applicationSupplied:{value:!1,validator:a.Lang.isBoolean},dnsActive:{value:!1,
validator:a.Lang.isBoolean},googleDnsActive:{value:!1,validator:a.Lang.isBoolean},managed:{value:!1,validator:a.Lang.isBoolean},revokable:{value:!1,validator:a.Lang.isBoolean},withinPropagationWindow:{value:!1,validator:a.Lang.isBoolean},id:{validator:a.Lang.isString},name:{validator:a.Lang.isString}}});a.namespace("Squarespace.Models").Domain=c},"1.0",{requires:["base","model","promise","squarespace-model-sync-rest","squarespace-util"]});
YUI.add("squarespace-dialog-button",function(a){var c=a.namespace("Squarespace.DialogFields").Button=a.namespace("Squarespace.Widgets").Button=a.Base.create("button",a.Squarespace.DialogField2,[],{initializer:function(a){this.get("contentBox").addClass(this.get("alignment"));this.publish("click")},bindUI:function(){c.superclass.bindUI.call(this);this.get("contentBox").on("click",this._handleClick,this);this.on("stringsChange",this._updateStringElements,this);this.after("waitingChange",function(a){this._toggleWaitingSpinner(a.newVal)},
this)},renderUI:function(){c.superclass.renderUI.call(this);var b=this.get("boundingBox"),d=this._anchorNode=this.get("contentBox").one("a"),h=this.get("name");d.set("value",this.get("data"));d.set("name",h);b.setAttribute("title",this.get("strings.text"));this._renderButtonText();this._renderSpinner();this._toggleActive(this.get("active")&&a.Lang.isValue(h))},syncUI:function(){c.superclass.syncUI.call(this);this._toggleWaitingSpinner(this.get("waiting"))},setText:function(a){this.set("strings.text",
a)},getText:function(){return this.get("strings.text")},setOnClick:function(b,d){a.Lang.isFunction(b)&&this.set("onClick",b);a.Lang.isValue(d)&&this.set("context",d)},disable:function(){this.toggleDisabled(!0)},enable:function(){this.toggleDisabled(!1)},showWaiting:function(){this._toggleWaitingSpinner(!0);this.set("waiting",!0)},hideWaiting:function(){this._toggleWaitingSpinner(!1);this.set("waiting",!1)},toggleDisabled:function(a){this.set("disabled",a);this.get("contentBox").toggleClass("disabled",
a)},_toggleActive:function(a){this.set("active",a);this.get("contentBox").toggleClass("active",a)},_toggleWaitingSpinner:function(a){a?this._waiting.show():this._waiting.hide()},_handleClick:function(b){var d=this._anchorNode;this.get("disabled")?b.halt():(b=this.get("href"))?this.get("newWindow")?window.open(b):window.location=b:a.Lang.isFunction(this.get("onClick"))?this.get("onClick").call(this.get("context")):d.fire("click",this.get("active"))},_animateTextChange:function(b){var d=new a.Anim({node:this._anchorNode,
from:{opacity:0},to:{opacity:1},duration:0.2,easing:"easeOut"});b=new a.Anim({node:this._anchorNode,from:{opacity:1},to:{opacity:0},duration:0.2,easing:"easeIn"});d.on("end",a.bind(function(){this._toggleActive(!0)},this));b.on("end",a.bind(function(){this._renderButtonText();a.Lang.isNull(this._anchorNode)||d.run()},this));this._toggleActive(!1);this._registerAnim(d);this._registerAnim(b);b.run()},_updateStringElements:function(a){"strings.text"===a.subAttrName&&this._animateTextChange(a.newVal.text)},
_renderIcon:function(){this.get("icon")&&this._button.append('<div class="icon"></div>')},_renderButtonText:function(){var b=this.get("strings.text");a.Lang.isString(b)&&0<b.length&&this._anchorNode.setHTML(b)},_renderSpinner:function(){this._waiting=a.Node.create('<div class="waiting"></div>');this.get("contentBox").append(this._waiting);this._waiting.hide()}},{CSS_PREFIX:"sqs-button",TEMPLATE:"<a></a>",ATTRS:{active:{},alignment:{value:"",validator:a.Lang.isString},className:{value:"normal-button"},
context:{value:this},data:{},disabled:{setter:function(a){return!!a}},icon:{},name:{},onClick:{validator:a.Lang.isFunction},strings:{value:{title:"",text:""}},waiting:{value:!1},href:{validator:a.Lang.isString},newWindow:{value:!1,validator:a.Lang.isBoolean}}})},"1.0",{requires:"base node anim squarespace-dialog-field-2 squarespace-dialog squarespace-util".split(" ")});
YUI.add("squarespace-widgets-member-account",function(a){a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.MemberAccount=a.Base.create("MemberAccount",a.Squarespace.Widgets.Model,[],{renderUI:function(){c.superclass.renderUI.call(this)},_getHBTemplateContext:function(){var a=this.get("model").toJSON();a.avatarAssetUrl||(a.avatarAssetUrl="/universal/images-v6/default-avatar-white.png");return a}},{CSS_PREFIX:"sqs-member-account",HANDLEBARS_TEMPLATE:"widgets-member-account.html",ATTRS:{model:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.MemberAccount)}}})},
"1.0",{requires:["base","squarespace-util","squarespace-widgets-model","squarespace-widgets-member-account-template","squarespace-models-member-account"]});
YUI.add("squarespace-widgets-login-template",function(a){var c=a.Handlebars;(function(){var a=c.template;(c.templates=c.templates||{})["widgets-login.html"]=a(function(a,b,c,e,g){function k(a,b,c){var d;return a=""+('\n          <span data-login-method="'+s(typeof a===n?a.apply(a):a)+'" class="tab-item '+s(typeof a===n?a.apply(a):a)+" "+s((d=c.selectMode,typeof d===n?d.apply(a):d))+'"></span>\n        ')}function m(a,b){return"arrow"}this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);g=g||
{};var r,n="function",s=this.escapeExpression,p=this,q=c.blockHelperMissing;a='<div class="login-wrapper">\n  <div class="wait-overlay ';if((e=c.unless.call(b,b.waiting,{hash:{},inverse:p.noop,fn:p.program(1,function(a,b){return"hidden"},g),data:g}))||0===e)a+=e;a+='">\n    <div class="loading-spinner"></div>\n  </div>\n  \n  <div class="header ';r={hash:{},inverse:p.noop,fn:p.program(3,function(a,b){return"has-title"},g),data:g};(e=c.title)?e=e.call(b,r):(e=b.title,e=typeof e===n?e.apply(b):e);c.title||
(e=q.call(b,e,r));if(e||0===e)a+=e;a+='">\n    ';if((e=c["if"].call(b,b.title,{hash:{},inverse:p.noop,fn:p.program(5,function(a,b){var d,e;d='\n      <div class="title">';(e=c.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e=typeof e===n?e.apply(a):e);if(e||0===e)d+=e;return d+"</div>\n    "},g),data:g}))||0===e)a+=e;a+='\n  </div>\n\n  <div class="body ';(e=c.activeLoginMethod)?e=e.call(b,{hash:{},data:g}):(e=b.activeLoginMethod,e=typeof e===n?e.apply(b):e);a+=s(e)+'">\n    ';if((e=c.unless.call(b,
b.hideTab,{hash:{},inverse:p.noop,fn:p.program(7,function(a,b){var d,e;d='\n    <div class="login-selector select-mode-';(e=c.selectMode)?e=e.call(a,{hash:{},data:b}):(e=a.selectMode,e=typeof e===n?e.apply(a):e);d+=s(e)+'">\n      <div class="tabs">\n        ';if((e=c.each.call(a,a.tabsEnabled,{hash:{},inverse:p.noop,fn:p.programWithDepth(8,k,b,a),data:b}))||0===e)d+=e;return d+"\n      </div>\n    </div>\n    "},g),data:g}))||0===e)a+=e;a+='\n    \n    <div class="mode squarespace">\n      <div class="email-field-wrapper" data-field-name="email"></div>\n\n      <div class="password-field-wrapper">\n        <div data-field-name="password"></div>\n\n        <div class="password-recovery" data-action="password-recovery">Forgot?</div>\n      </div>\n\n      <div class="primordial-options">\n        <div class="stay-logged-in" data-field-name="stay-logged-in"></div>\n\n        ';
if((e=c["if"].call(b,b.enableGoogleLoginLink,{hash:{},inverse:p.noop,fn:p.program(10,function(a,b){return'\n          <div class="login-with-google" data-action="login-with-google">Login with Google+</div>\n        '},g),data:g}))||0===e)a+=e;a+="\n\n        ";if((e=c.unless.call(b,b.enableGoogleLoginLink,{hash:{},inverse:p.noop,fn:p.program(12,function(a,b){var d,e,g;d='\n          <div class="submit button ';if((g=c.unless.call(a,(e=a.strings,null==e||!1===e?e:e.loginButonTitle),{hash:{},inverse:p.noop,
fn:p.program(13,m,b),data:b}))||0===g)d+=g;return d+='" data-action="submit">'+s((e=(e=a.strings,null==e||!1===e?e:e.loginButonTitle),typeof e===n?e.apply(a):e))+"</div>\n        "},g),data:g}))||0===e)a+=e;a+='\n      </div>\n    </div>\n    <div class="mode google social-login">\n      <div class="social-login-button"></div>\n      <div class="social-login-cancel" data-action="login-with-squarespace">Login with Squarespace</div>\n    </div>\n    <div class="mode facebook social-login">\n      <div class="social-login-button"></div>\n      <div class="social-login-cancel" data-action="login-with-squarespace">Login with Squarespace</div>\n    </div>\n    <div class="mode twitter social-login">\n      <div class="social-login-button"></div>\n      <div class="social-login-cancel" data-action="login-with-squarespace">Login with Squarespace</div>\n    </div>\n    <div class="mode guest">\n      <div class="display-name-field-wrapper" data-field-name="displayName"></div>\n      <div class="anon-email-field-wrapper" data-field-name="anonEmail"></div>\n      <div class="author-url-field-wrapper" data-field-name="authorUrl"></div>\n      <div class="buttons">\n        ';
if((e=c["if"].call(b,b.canCancel,{hash:{},inverse:p.noop,fn:p.program(15,function(a,b){return'\n          <div class="cancel" data-action="cancel">Cancel</div>\n        '},g),data:g}))||0===e)a+=e;a+='\n        <div class="submit button" data-action="submit">'+s((e=(e=b.strings,null==e||!1===e?e:e.loginButonTitle),typeof e===n?e.apply(b):e))+'</div>\n      </div>\n    </div>\n  </div>\n\n  <div class="footer ';(e=c.activeLoginMethod)?e=e.call(b,{hash:{},data:g}):(e=b.activeLoginMethod,e=typeof e===
n?e.apply(b):e);a+=s(e)+'">\n    <div class="buttons">\n      ';if((e=c["if"].call(b,b.canCancel,{hash:{},inverse:p.noop,fn:p.program(17,function(a,b){return'\n        <div class="cancel" data-action="cancel">Cancel</div>\n      '},g),data:g}))||0===e)a+=e;a+="\n      \n      ";if((e=c["if"].call(b,b.canCreateAccount,{hash:{},inverse:p.noop,fn:p.program(19,function(a,b){return'\n        <div class="create-account" data-action="create-account">Create Squarespace Account</div>\n      '},g),data:g}))||
0===e)a+=e;a+="\n\n      ";if((e=c["if"].call(b,b.enableGoogleLoginLink,{hash:{},inverse:p.noop,fn:p.program(21,function(a,b){var d,e,g;d='\n        <div class="submit button ';if((g=c.unless.call(a,(e=a.strings,null==e||!1===e?e:e.loginButonTitle),{hash:{},inverse:p.noop,fn:p.program(13,m,b),data:b}))||0===g)d+=g;return d+='" data-action="submit">'+s((e=(e=a.strings,null==e||!1===e?e:e.loginButonTitle),typeof e===n?e.apply(a):e))+"</div>\n      "},g),data:g}))||0===e)a+=e;return a+"\n    </div>\n  </div>\n</div>"})})();
a.Handlebars.registerPartial("widgets-login.html".replace("/","."),c.templates["widgets-login.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-promises",function(a){function c(){}var b=a.namespace("Squarespace.Promises");b.all=function(){var b=new a.Array(arguments);return new a.Promise(function(c,f){var e=[],g=b.length,k=0,m=function(a){return function(b){k++;e[a]=b;k>=g&&c(e)}};a.Array.each(b,function(b,d){a.when(b).then(m(d),f)})})};b.resolve=function(a,b){return a.then(b)};b.reject=function(a,b){return a.then(c,b)};b.rejectWith=function(b){return a.Squarespace.Promises.create(function(a,c){c(b)})};b.finish=function(a,
b){return a.then(b,b)};b.chainFns=function(b,c){return function(){c=c||this;var f=0<b.length?b.shift().apply(c,arguments):a.when();return a.Array.reduce(b,f,function(b,d){return a.Squarespace.Promises.resolve(a.when(b),a.bind(d,c))})}};b.create=function(b,c){return new a.Promise(a.bind(b,c))}},"1.0",{requires:["promise"]});
YUI.add("squarespace-dialog-label",function(a){a.namespace("Squarespace.Plugin").DialogFieldLabel=a.Base.create("dialogFieldLabel",a.Plugin.Base,[],{initializer:function(a){this.afterHostMethod("renderUI",this._render,this);this.afterHostMethod("syncUI",this.syncLabel,this)},destructor:function(){a.detach(this.get("id")+"|*");var c=this.get("host"),b=c.get("boundingBox");c.get("rendered")&&(b&&b._node)&&c.get("boundingBox").removeClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+"-plugged")},
_render:function(){this.renderLabel();this.bindLabel();this.syncLabel();this.get("host").get("boundingBox").addClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX+"-plugged")},renderLabel:function(){this._labelNode=a.Node.create("<label></label>");this._labelNode.addClass(a.Squarespace.Plugin.DialogFieldLabel.CSS_PREFIX);var c=this._labelNode;this.get("inField");var b=this.get("renderNode");this.get("strings.text");var d=this.get("className"),h=this.get("forNode"),f=this.get("host").get("contentBox");
d&&c.addClass(d);b?(a.Lang.isString(b)&&(b=f.one(b)),b.appendChild(c)):h?(a.Lang.isString(h)&&(h=f.one(h)),(b=h.getAttribute("id"))&&c.setAttribute("for",b),h.insert(c,"before")):(f.one("input")||f.one("select")||f.one("textarea")||f.one("button")).insert(c,"before")},bindLabel:function(){var a=this.get("id");this.on(a+"|classNameChange",function(a){this._labelNode.removeClass(a.prevVal);this._labelNode.addClass(a.newVal)},this)},syncLabel:function(){this._labelNode.setContent(this.get("strings.text"))}},
{NS:"label",CSS_PREFIX:"sqs-dialog-field-label",ATTRS:{strings:{value:{text:""}},renderNode:{value:null},className:{value:null},forNode:{value:null}}});a.namespace("Squarespace.DialogFields").DialogFieldLabel=function(c){a.Do.before(function(){this.plug(a.Squarespace.Plugin.DialogFieldLabel,a.merge({renderNode:c.labelRenderNode||null,forNode:c.labelForNode||null,className:c.labelClassName||null,"strings.text":this.get("strings.label")},c.labelConfig||{},this.getProperty("LABEL_CONFIG")||{}))},this,
"renderUI",this)};a.Squarespace.DialogFields.DialogFieldLabel.NAME="dialogFieldLabel"},"1.0",{requires:["base","node","plugin","squarespace-dialog-field-2"]});
YUI.add("squarespace-widgets-login",function(a){var c={email:{ctor:a.Squarespace.DialogFields.Text,config:{name:"email",submitOnEnter:!0,className:"large",strings:{placeholder:"Email Address"}}},password:{ctor:a.Squarespace.DialogFields.Text,config:{name:"password",submitOnEnter:!0,className:"large",strings:{placeholder:"Password"},password:!0}},"stay-logged-in":{ctor:a.Squarespace.DialogFields.Check,config:{name:"stay-logged-in","strings.title":"Stay Logged In",data:!0}},displayName:{ctor:a.Squarespace.DialogFields.Text,
config:{name:"displayName",required:!0,submitOnEnter:!0,className:"large",strings:{placeholder:"Your Name"}}},anonEmail:{ctor:a.Squarespace.DialogFields.Email,config:{name:"anonEmail",required:!1,submitOnEnter:!0,mailcheck:!0,className:"large",strings:{placeholder:"Email (Optional)"}}},authorUrl:{ctor:a.Squarespace.DialogFields.Text,config:{name:"authorUrl",required:!1,submitOnEnter:!0,className:"large",strings:{placeholder:"Website URL (Optional)"}}}};a.namespace("Squarespace.Widgets");var b=a.Squarespace.Widgets.Login=
a.Base.create("login",a.Squarespace.SSWidget,[],{delegatedEvents:{'[data-action="submit"]':{click:"_onSubmit"},'[data-action="cancel"]':{click:"_onCancel"},".tabs:not(.single-tab) .tab-item":{click:"_onTabClick"},".social-login-button":{click:"_onSubmit"},".login-with-google":{click:"_activateGoogleLogin"},'[data-action="login-with-squarespace"]':{click:"_activateSquarespaceLogin"},".password-recovery":{click:"_onPasswordRecoveryClick"},".create-account":{click:"_onCreateAccountClick"}},initializer:function(){this._initializeFields();
this.externalAuth=new a.Squarespace.ExternalAuthentication({includeWebsiteList:!0});this.publish("loginSuccess",{emitFacade:!0});this.publish("loginSuccess",{emitFacade:!1})},_initializeFields:function(){var b=[];a.Object.each(c,function(c,f){c.config.errorFlyoutRenderTarget=this.get("boundingBox");var e=new c.ctor(a.merge(c.config));b.push(e)},this);a.Squarespace.FormUtils.setData(b,{email:this.get("email")});this._fields=b},renderUI:function(){b.superclass.renderUI.call(this);var c=this.get("contentBox");
a.Squarespace.FormUtils.template(c,this._fields);(new a.Squarespace.Spinner({color:"dark",size:"large",render:c.one(".loading-spinner")})).spin();this._focusInput()},bindUI:function(){b.superclass.bindUI.call(this);this.after("waitingChange",this.syncUI,this);this.after("activeLoginMethodChange",this._switchTab,this);a.Array.each(this._fields,function(a){if("text"===a.getType())a.on("submit",this._onSubmit,this)},this);this.on("waitingChange",function(b){a.Array.each(this._fields,function(a){a.set("readOnly",
b.newVal)})},this)},syncUI:function(){b.superclass.syncUI.call(this);var a=this.get("contentBox").one(".tabs");1===this.get("tabsEnabled")?a.addClass("single-tabs"):a&&a.removeClass("single-tabs");var c=this.get("contentBox").one(".wait-overlay");this.get("waiting")?c.removeClass("hidden"):c.addClass("hidden");a&&(a.all(".tab-item.active").removeClass("active"),c=this.get("activeLoginMethod"),(a=a.one('.tab-item[data-login-method="'+c+'"]'))&&a.addClass("active"))},_focusInput:function(){a.Array.find(this._fields,
function(a){return"email"===a.get("name")}).focus()},_activateSquarespaceLogin:function(){this.set("activeLoginMethod","squarespace")},_activateGoogleLogin:function(){this.set("activeLoginMethod","google")},_onPasswordRecoveryClick:function(b){a.Squarespace.FormUtils.hideErrors(this._fields);this.hide();b=a.Squarespace.FormUtils.getData(this._fields);(new a.Squarespace.Widgets.PasswordRecovery({render:!0,email:b.email})).on("destroy",this.show,this)},_onCancel:function(a){this.fire("cancel");this.destroy()},
_onCreateAccountClick:function(b){var c,f;this.hide();f=SQUARESPACE_LOGIN.createSquarespaceAccount();f.once("destroy",this.show,this);f.on("send-requested",function(b){c=f.getData();a.Data.post({data:c,secure:!0,url:"/api/auth/CreateSquarespaceAccount",success:function(b){f.close();a.Squarespace.FormUtils.setData(this._fields,c);this._loginSquarespace().then(a.bind(this._handleLoginSuccess,this),a.bind(this._handleLoginFailure,this))},failure:function(a){f.showErrors(a.errors)}},this)},this)},_getHBTemplateContext:function(){var a=
b.superclass._getHBTemplateContext.call(this);a.selectMode="thin";1==a.tabsEnabled.length?a.selectMode="single":3>a.tabsEnabled.length&&(a.selectMode="wide");0===a.tabsEnabled.length&&(a.hideTab=!0);null===this.get("strings.loginButonTitle")&&(a.useArrow=!0);return a},_onTabClick:function(a){a=a.target.ancestor(".tab-item",!0).getAttribute("data-login-method");this.set("activeLoginMethod",a)},_switchTab:function(b){var c=this.get("contentBox").all(".body,.footer");c.removeClass(b.prevVal);c.addClass(b.newVal);
this.syncUI();a.Squarespace.FormUtils.hideErrors(this._fields)},_onSubmit:function(){this.set("waiting",!0);var b=this.get("activeLoginMethod");a.Squarespace.FormUtils.hideErrors(this._fields);switch(b){case "squarespace":b=this._loginSquarespace();break;case "guest":b=this._loginGuest();break;case "google":b=this._loginOauth(a.Squarespace.ExternalServiceProviders.GOOGLEAUTH2);break;case "facebook":b=this._loginOauth(a.Squarespace.ExternalServiceProviders.FACEBOOK);break;case "twitter":b=this._loginOauth(a.Squarespace.ExternalServiceProviders.TWITTER);
break;default:console.error("unknown method: "+b);return}b.then(a.bind(this._handleLoginSuccess,this),a.bind(this._handleLoginFailure,this))},_loginSquarespace:function(){var b=a.Squarespace.FormUtils.getData(this._fields),c=b.email,f=b.password,e=b["stay-logged-in"],g=""+this.get("returnWebsiteList"),k=this.get("targetIdentifier");return new a.Promise(function(b,d){a.Data.post({url:"/api/auth/Login",secure:!0,data:{email:c,password:f,includeWebsiteList:g,remember:e,targetIdentifier:k},success:function(a){b({type:"v6",
websites:a.websites,account:a.account,website:a.targetWebsite})},failure:d})})},_loginGuest:function(){var b=a.Squarespace.FormUtils.getData(this._fields),c=b.displayName,f=b.anonEmail,e=b.authorUrl;return new a.Promise(function(b,d){(!a.Lang.isString(c)||1>c.length)&&d({errors:{displayName:"Need to specify display name"}});b({type:"guest",displayName:c,email:f,authorUrl:e})})},_loginOauth:function(b){var c=this.get("returnWebsiteList"),f=this.get("targetIdentifier");return new a.Promise(function(e,
g){var k=new a.Squarespace.ExternalAuthentication({includeWebsiteList:c,useLoginFlag:!0,targetIdentifier:f});k.on("completed",function(b){b=k.get("websites");var c=k.get("memberAccount"),d=k.get("website");a.Lang.isObject(c)?e({websites:b,account:c,website:d}):g({type:"oauth",error:"Failed to authenticate with thirdparty."})},this);k.openPopupWindow(b)})},_handleLoginSuccess:function(a){this.fire("loginSuccess",a);this.set("waiting",!1)},_handleLoginFailure:function(b){this.set("waiting",!1);a.Lang.isObject(b.errors)?
a.Squarespace.FormUtils.showErrors(this._fields,b.errors):a.Lang.isString(b.error)&&new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":"Login Failed","strings.message":b.error})}},{CSS_PREFIX:"sqs-widgets-login",HANDLEBARS_TEMPLATE:"widgets-login.html",ATTRS:{activeLoginMethod:{value:"squarespace",validator:a.Squarespace.AttrValidators.isValueIn(["squarespace","google","twitter","facebook","guest"])},tabsEnabled:{value:["squarespace"],validator:a.Squarespace.AttrValidators.isArray,
writeOnce:"initOnly"},enableGoogleLoginLink:{value:!1,writeOnce:"initOnly"},returnWebsiteList:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},targetIdentifier:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},canCancel:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},email:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},canCreateAccount:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,
writeOnce:"initOnly"},useLoginFlag:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"},title:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"},waiting:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},strings:{value:{loginButonTitle:"Login",validator:a.Squarespace.AttrValidators.isNullOrString,writeOnce:"initOnly"}}}})},"1.0",{requires:"base squarespace-ss-widget squarespace-dialog-text squarespace-dialog-check squarespace-widgets-login-template squarespace-external-authentication squarespace-form-utils squarespace-widgets-password-recovery".split(" ")});
YUI.add("squarespace-mixins-loadable",function(a){a.namespace("Squarespace.Mixins");a.Squarespace.Mixins.Loadable=a.Base.create("Loadable",a.Base,[],{initializer:function(){var c=this.get("loadable"),b=this.get("loadOnInitialize");a.Lang.isValue(c)?(this._bindLoadable(),b&&c.load()):b&&console.error("Squarespace.Mixins.Loadable: You set loadOnInitialize to true, but the loadable was not defined in the initializer.");this.after("loadableChange",this._bindLoadable,this)},_bindLoadable:function(){var c=
this.get("loadable");a.Do.before(function(){this._set("loading",!0)},c,"load",this);c.after("load",function(){this._set("loading",!1)},this);a.Do.after(function(){this.after("loadingChange",this.syncUI,this)},this,"bindUI",this)}},{ATTRS:{loadable:{value:null},loading:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,readOnly:!0},loadOnInitialize:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean,writeOnce:"initOnly"}}})},"1.0",{requires:["base","event-custom","squarespace-attr-validators"]});
YUI.add("squarespace-dialog-description",function(a){var c=a.namespace("Squarespace.DialogFields").Description=a.Base.create("descriptionField",a.Squarespace.DialogField2,[],{renderUI:function(){c.superclass.renderUI.call(this);var b=this.get("padding");this._descEl=this.get("contentBox").one(".custom-field-description");a.Lang.isArray(b)&&0<b.length&&this._descEl.setStyles({paddingTop:b[0],paddingBottom:b[1]});this._attachNode("title");this._attachNode("text")},bindUI:function(){c.superclass.bindUI.call(this);
this.after(["titleChange","textChange"],this.syncUI,this)},syncUI:function(){c.superclass.syncUI.call(this);this._descEl.empty();this._attachNode("title");this._attachNode("text")},_attachNode:function(b){var c=this.get(b);a.Lang.isString(c)&&0<c.length&&(attrNode=a.Node.create('<div class="'+b+'">'+c+"</div>"),this._descEl.append(attrNode))},_getAsString:function(b){return!a.Lang.isValue(b)?"":b+""},setTitle:function(a){this.set("title",a)},setText:function(a){this.set("text",a)}},{CSS_PREFIX:"sqs-description",
TEMPLATE:'<div class="custom-field-description"></div>',ATTRS:{title:{value:"",getter:this._getAsString},text:{value:"",getter:this._getAsString},className:{value:"",validator:a.Lang.isString},padding:{value:[],validator:a.Lang.isArray},focusable:{value:!1}}})},"1.0.0",{requires:["node","base","squarespace-dialog-field-2"]});
YUI.add("squarespace-form-utils",function(a){var c=a.namespace("Squarespace.FormUtils");c.setData=function(b,c){a.Lang.isValue(c)&&a.Array.each(b,function(b){var f=c[b.get("name")];a.Lang.isUndefined(f)||b.set("data",f)})};c.getData=function(b){b=b||[];return a.Array.reduce(b,{},function(b,c){var f=c.get("data");!a.Lang.isUndefined(f)&&a.Lang.isValue(c.get("name"))&&(b[c.get("name")]=f);return b})};c.template=function(b,c){a.Lang.isArray(c)?a.Array.each(c,function(a){var c=a.get("name"),d=b.one('[data-field-name="'+
c+'"]');d?a.render(d):console.warn('No target node found for widget "'+c+'".')}):a.Lang.isObject(c)&&a.Object.each(c.groups||{},function(c,d){var e=b.one('[data-field-group="'+d+'"]');e&&a.Array.each(c,function(a){a.render(e)})})};c.validate=function(b){return a.Array.reduce(b,{},function(b,c){if(a.Lang.isFunction(c.getErrors)){var f=c.getErrors();f.length&&(b[c.get("name")]=f[0])}return b})};c.showErrors=function(b,c){a.Array.each(b,function(b){var f=c[b.get("name")];a.Lang.isValue(f)&&""!==f&&a.Lang.isFunction(b.showError)&&
b.showError(f)})};c.hideErrors=function(b){a.Array.each(b,function(b){a.Lang.isFunction(b.hideError)&&b.hideError()})}},"1.0",{requires:["node","array-extras"]});
YUI.add("squarespace-widgets-password-recovery",function(a){var c={email:{ctor:a.Squarespace.DialogFields.Text,config:{name:"email",submitOnEnter:!0,strings:{placeholder:"Email Address"}}},description:{ctor:a.Squarespace.DialogFields.Description,config:{name:"description",text:"Please enter the email address that you used when creating your account. An email will be sent to that address with further instructions on how to reset your password."}},"sent-description":{ctor:a.Squarespace.DialogFields.Description,
config:{name:"sent-description",text:"You have been sent an email with further instructions on resetting your password."}}};a.namespace("Squarespace.Widgets");var b=a.Squarespace.Widgets.PasswordRecovery=a.Base.create("passwordRecovery",a.Squarespace.SSWidget,[],{delegatedEvents:{'[data-action="cancel"]':{click:"_onCancel"},'[data-action="submit"]':{click:"_onSubmit"}},initializer:function(){this._initializeFields()},_initializeFields:function(){var b=[],h={errorFlyoutRenderTarget:this.get("boundingBox")};
a.Object.each(c,function(c,e){b.push(new c.ctor(a.merge(h,c.config)))});a.Squarespace.FormUtils.setData(b,this.getAttrs());this._fields=b},destructor:function(){a.Squarespace.FormUtils.hideErrors(this._fields)},renderUI:function(){b.superclass.renderUI.call(this);a.Squarespace.FormUtils.template(this.get("contentBox"),this._fields)},bindUI:function(){b.superclass.bindUI.call(this);a.Array.each(this._fields,function(a){if("text"===a.getType())a.on("submit",this._onSubmit,this)},this);this.on("stateChange",
this._onStateChange,this)},_getHBTemplateContext:function(){return b.superclass._getHBTemplateContext.call(this)},_onStateChange:function(a){var b=this.get("contentBox").one(".password-recovery-wrapper");b.removeClass("state-"+a.prevVal);b.addClass("state-"+a.newVal)},_onSubmit:function(){var b=a.Squarespace.FormUtils.getData(this._fields).email;this._isValidEmail(b)?(this.set("email",b),this._sendPasswordReset(b).then(a.bind(this._sentSuccessfully,this),a.bind(this._sendFailed,this))):a.Squarespace.FormUtils.showErrors(this._fields,
{email:"You need a valid email address."})},_isValidEmail:function(b){return a.Lang.isString(b)&&0<b.indexOf("@")},_sentSuccessfully:function(a){this.set("state","sent")},_sendFailed:function(b){this.set("state","form");a.Squarespace.FormUtils.showErrors(this._fields,b.errors)},_onCancel:function(){this.destroy()},_sendPasswordReset:function(b){this.set("state","sending");return new a.Promise(function(c,f){a.Data.post({url:"/api/auth/PasswordReset",secure:!0,data:{email:b},success:c,failure:f})})}},
{CSS_PREFIX:"sqs-widgets-password-recovery",HANDLEBARS_TEMPLATE:"widgets-password-recovery.html",ATTRS:{email:{validator:a.Squarespace.AttrValidators.isString},state:{value:"form",validator:a.Squarespace.AttrValidators.isString}}})},"1.0",{requires:["base","squarespace-ss-widget","squarespace-dialog-text","squarespace-widgets-password-recovery-template","squarespace-form-utils"]});
YUI.add("squarespace-trial-alert-dialog",function(a){var c=a.namespace("Squarespace.Widgets").TrialAlertDialog=a.Base.create("trialAlertDialog",a.Squarespace.Widgets.ModalDialog,[],{initializer:function(){this.add(new a.Squarespace.DialogFields.HTML({content:this.get("strings.description"),className:"description"}))},bindUI:function(){c.superclass.bindUI.call(this);this.get("contentBox").delegate("click",this._showCaptchaLogin,".captcha-login",this)},_showCaptchaLogin:function(){this._spawnChild(new a.Squarespace.Widgets.TrialLoginDialog({render:!0,
visible:!1,zIndex:this.get("zIndex")+1}))}},{CSS_PREFIX:"sqs-trial-alert-dialog",ATTRS:{strings:{value:{title:"Squarespace Trial",description:"<strong>Squarespace trial accounts are not visible to the public.</strong> When you are ready to publish your website, upgrading your trial will make your site active to the world."}},buttons:{value:['<a href="/config" class="button">Owner Login</a>','<span class="button captcha-login">Visitor Access</span>']}}})},"1.0",{requires:["base","squarespace-modal-dialog",
"squarespace-trial-login-dialog","squarespace-dialog-html"]});
YUI.add("widget-stack",function(a,c){function b(a){}var d=a.Lang,h=a.UA,f=a.Node,e=a.Widget;b.ATTRS={shim:{value:6==h.ie},zIndex:{value:0,setter:"_setZIndex"}};b.HTML_PARSER={zIndex:function(a){return this._parseZIndex(a)}};b.SHIM_CLASS_NAME=e.getClassName("shim");b.STACKED_CLASS_NAME=e.getClassName("stacked");b.SHIM_TEMPLATE='<iframe class="'+b.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';b.prototype={initializer:function(){this._stackNode=
this.get("boundingBox");this._stackHandles={};a.after(this._renderUIStack,this,"renderUI");a.after(this._syncUIStack,this,"syncUI");a.after(this._bindUIStack,this,"bindUI")},_syncUIStack:function(){this._uiSetShim(this.get("shim"));this._uiSetZIndex(this.get("zIndex"))},_bindUIStack:function(){this.after("shimChange",this._afterShimChange);this.after("zIndexChange",this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(b.STACKED_CLASS_NAME)},_parseZIndex:function(a){a=!a.inDoc()||
"static"===a.getStyle("position")?"auto":a.getComputedStyle("zIndex");return"auto"===a?null:a},_setZIndex:function(a){d.isString(a)&&(a=parseInt(a,10));d.isNumber(a)||(a=0);return a},_afterShimChange:function(a){this._uiSetShim(a.newVal)},_afterZIndexChange:function(a){this._uiSetZIndex(a.newVal)},_uiSetZIndex:function(a){this._stackNode.setStyle("zIndex",a)},_uiSetShim:function(a){a?(this.get("visible")?this._renderShim():this._renderShimDeferred(),6==h.ie&&this._addShimResizeHandlers()):this._destroyShim()},
_renderShimDeferred:function(){this._stackHandles.shimdeferred=this._stackHandles.shimdeferred||[];this._stackHandles.shimdeferred.push(this.on("visibleChange",function(a){a.newVal&&this._renderShim()}))},_addShimResizeHandlers:function(){this._stackHandles.shimresize=this._stackHandles.shimresize||[];var a=this.sizeShim,b=this._stackHandles.shimresize;b.push(this.after("visibleChange",a));b.push(this.after("widthChange",a));b.push(this.after("heightChange",a));b.push(this.after("contentUpdate",a))},
_detachStackHandles:function(a){a=this._stackHandles[a];var b;if(a&&0<a.length)for(;b=a.pop();)b.detach()},_renderShim:function(){var a=this._shimNode,b=this._stackNode;a||(a=this._shimNode=this._getShimTemplate(),b.insertBefore(a,b.get("firstChild")),this._detachStackHandles("shimdeferred"),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get("parentNode").removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles("shimdeferred"),this._detachStackHandles("shimresize"))},
sizeShim:function(){var a=this._shimNode,b=this._stackNode;a&&(6===h.ie&&this.get("visible"))&&(a.setStyle("width",b.get("offsetWidth")+"px"),a.setStyle("height",b.get("offsetHeight")+"px"))},_getShimTemplate:function(){return f.create(b.SHIM_TEMPLATE,this._stackNode.get("ownerDocument"))}};a.WidgetStack=b},"3.17.2",{requires:["base-build","widget"],skinnable:!0});
YUI.add("squarespace-widgets-alert",function(a){a.namespace("Squarespace.Widgets");a.Squarespace.Widgets.Alert=a.Base.create("alert",a.Squarespace.Widgets.Confirmation,[],{},{CSS_PREFIX:"sqs-widgets-confirmation",TYPE:a.Squarespace.Widgets.Confirmation.TYPE,ANCHOR:a.Squarespace.Widgets.Confirmation.ANCHOR,ATTRS:{className:{value:"alert"},style:{value:a.Squarespace.Widgets.Confirmation.TYPE.CONFIRM_ONLY},"strings.confirm":{value:"Okay"}}})},"1.0",{requires:["base","squarespace-widgets-confirmation"]});
YUI.add("squarespace-plugin-v5login",function(a){a.namespace("Squarespace.Plugin");a.Squarespace.Plugin.V5Login=a.Base.create("V5Login",a.Plugin.Base,[],{initializer:function(c){this._eventHandler=a.Do.before(this._proxyLogin,this.get("host"),"_loginSquarespace",this)},destroy:function(){this._eventHandler.detach();this._eventHandler=null},_proxyLogin:function(){var c=this.get("host"),b=a.Squarespace.FormUtils.getData(c._fields),c=b.email,b=b.password;if(-1===c.indexOf("@"))return new a.Do.Halt("V5 account",
this._v5Login(c,b))},_v5Login:function(c,b){var d=b64_sha1(b);return SQUARESPACE_LOGIN.loginRPCProvider?new a.Promise(function(a,b){SQUARESPACE_LOGIN.loginRPCProvider.v5LoginRequest(c,d,a,function(a){b(a.message)})}):a.Squarespace.Auth.loginV5(c,d)}},{NS:"v5login"})},"1.0",{requires:["base","thirdparty-sha1","squarespace-v5login-utils"]});
YUI.add("squarespace-external-authentication",function(a){a.namespace("Squarespace");a.Squarespace.ExternalAuthentication=a.Base.create("externalAuthentication",a.Base,[],{initializer:function(){this.publish("completed")},openPopupWindow:function(c,b,d){c="/auth/ExternalAuthenticationInitiate?"+this._buildQueryParams(c,b,d);this._oauthWindow=window.open(c,"ConnectWithOAuth","location=0,status=0,scrollbars=1,width=1020,height=520");this._checkClosedOnInterval();c=window.addEventListener?"addEventListener":
"attachEvent";(0,window[c])("attachEvent"==c?"onmessage":"message",a.bind(this._receiveMessage,this),!1)},_buildQueryParams:function(c,b,d){var h="serviceProvider="+c;a.Lang.isValue(b)&&a.Lang.isValue(d)&&(h+="&"+b+"="+d);this.get("useLoginFlag")&&(h+="&loginFlag=true");this.get("includeWebsiteList")&&(h+="&includeWebsiteList=true");b=this.get("targetIdentifier");a.Lang.isString(b)&&(h+="&targetIdentifier="+b);b=this.get("authenticationType");a.Lang.isValue(b)&&(h+="&type="+b);(b=this._getInviteCode())&&
(h+="&"+b);c===a.Squarespace.ExternalServiceProviders.FACEBOOK&&(h+="&redirArgs="+encodeURIComponent("scope"+a.Squarespace.FacebookExtendedPermissions));return h+="&uuid="+this.get("uuid")},_getInviteCode:function(){var c=document.location.search;"?"===c[0]&&(c=c.slice(1));return a.Array.find(c.split("&"),function(a){return 0===a.indexOf("invitation=")},this)},_receiveMessage:function(c){c=JSON.parse(c.data);a.Lang.isObject(c)&&this.setAttrs({websites:c.websites,website:c.website,memberAccount:c.memberAccount,
socialConfig:c.socialConfig,messageReceived:!0})},_checkClosedOnInterval:function(){this._oauthWindow.closed||window.callbackFinished?(window.callbackFinished=!1,this.get("messageReceived")?this.fire("completed"):a.Data.get({url:"/auth/ExternalAuthenticationGetResult?uuid="+this.get("uuid"),success:function(a){this.setAttrs({websites:a.websites,account:a.memberAccount,website:a.website,socialConfig:a.socialConfig});this.fire("completed")},failure:function(a){this.fire("completed")}},this)):a.later(200,
this,this._checkClosedOnInterval)}},{ATTRS:{useLoginFlag:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},includeWebsiteList:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean},targetIdentifier:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString},uuid:{value:null,valueFn:function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var d=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"==b?d:d&7|8).toString(16)})},
validator:a.Squarespace.AttrValidators.isNullOrString},authenticationType:{value:null},websites:{value:null},website:{value:null},memberAccount:{value:null},socialConfig:{value:null},messageReceived:{value:!1,validator:a.Squarespace.AttrValidators.isBoolean}}})},"1.0",{requires:["base","squarespace-attr-validators","squarespace-enum","squarespace-util"]});
(function(a,c,b,d,h,f){function e(a,b){var c=typeof a[b];return"function"==c||!!("object"==c&&a[b])||"unknown"==c}function g(){if(!q(navigator.plugins)&&"object"==typeof navigator.plugins["Shockwave Flash"]){var a=navigator.plugins["Shockwave Flash"].description;a&&(!q(navigator.mimeTypes)&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(C=a.match(/\d+/g))}if(!C){var b;try{b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),
C=Array.prototype.slice.call(b.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(c){}}if(!C)return!1;a=parseInt(C[0],10);b=parseInt(C[1],10);O=9<a&&0<b;return!0}function k(){if(!D){D=!0;for(var a=0;a<J.length;a++)J[a]();J.length=0}}function m(a,b){D?a.call(b):J.push(function(){a.call(b)})}function r(){var a=parent;if(""!==H)for(var b=0,c=H.split(".");b<c.length;b++)a=a[c[b]];return a.easyXDM}function n(a){var b=a.toLowerCase().match(K);a=b[2];var c=b[3],b=b[4]||"";if("http:"==a&&":80"==
b||"https:"==a&&":443"==b)b="";return a+"//"+c+b}function s(a){a=a.replace(Z,"$1/");if(!a.match(/^(http||https):\/\//)){var c="/"===a.substring(0,1)?"":b.pathname;"/"!==c.substring(c.length-1)&&(c=c.substring(0,c.lastIndexOf("/")+1));a=b.protocol+"//"+b.host+c+a}for(;T.test(a);)a=a.replace(T,"");return a}function p(a,b){var c="",e=a.indexOf("#");-1!==e&&(c=a.substring(e),a=a.substring(0,e));var e=[],d;for(d in b)b.hasOwnProperty(d)&&e.push(d+"="+f(b[d]));return a+(U?"#":-1==a.indexOf("?")?"?":"&")+
e.join("&")+c}function q(a){return"undefined"===typeof a}function t(a,b,c){var e,d;for(d in b)b.hasOwnProperty(d)&&(d in a?(e=b[d],"object"===typeof e?t(a[d],e,c):c||(a[d]=b[d])):a[d]=b[d]);return a}function B(a){if(q(L)){var b=c.body.appendChild(c.createElement("form")),e=b.appendChild(c.createElement("input"));e.name=x+"TEST"+V;L=e!==b.elements[e.name];c.body.removeChild(b)}L?b=c.createElement('<iframe name="'+a.props.name+'"/>'):(b=c.createElement("IFRAME"),b.name=a.props.name);b.id=b.name=a.props.name;
delete a.props.name;"string"==typeof a.container&&(a.container=c.getElementById(a.container));a.container||(t(b.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=c.body);e=a.props.src;a.props.src="javascript:false";t(b,a.props);b.border=b.frameBorder=0;b.allowTransparency=!0;a.container.appendChild(b);a.onLoad&&y(b,"load",a.onLoad);if(a.usePost){var d=a.container.appendChild(c.createElement("form")),f;d.target=b.name;d.action=e;d.method="POST";if("object"===typeof a.usePost)for(var g in a.usePost)a.usePost.hasOwnProperty(g)&&
(L?f=c.createElement('<input name="'+g+'"/>'):(f=c.createElement("INPUT"),f.name=g),f.value=a.usePost[g],d.appendChild(f));d.submit();d.parentNode.removeChild(d)}else b.src=e;a.props.src=e;return b}function R(d){var f=d.protocol,h;d.isHost=d.isHost||q(w.xdm_p);U=d.hash||!1;d.props||(d.props={});if(d.isHost)d.remote=s(d.remote),d.channel=d.channel||"default"+V++,d.secret=Math.random().toString(16).substring(2),q(f)&&(f=n(b.href)==n(d.remote)?"4":e(a,"postMessage")||e(c,"postMessage")?"1":d.swf&&e(a,
"ActiveXObject")&&g()?"6":"Gecko"===navigator.product&&"frameElement"in a&&-1==navigator.userAgent.indexOf("WebKit")?"5":d.remoteHelper?"2":"0");else{d.channel=w.xdm_c.replace(/["'<>\\]/g,"");d.secret=w.xdm_s;d.remote=w.xdm_e.replace(/["'<>\\]/g,"");var f=w.xdm_p,u;if(u=d.acl){a:{u=d.acl;var k=d.remote;"string"==typeof u&&(u=[u]);for(var E,z=u.length;z--;)if(E=u[z],E=RegExp("^"==E.substr(0,1)?E:"^"+E.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),E.test(k)){u=!0;break a}u=!1}u=!u}if(u)throw Error("Access denied for "+
d.remote);}d.protocol=f;switch(f){case "0":t(d,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(d.isHost){if(!d.local){f=b.protocol+"//"+b.host;h=c.body.getElementsByTagName("img");for(k=h.length;k--;)if(u=h[k],u.src.substring(0,f.length)===f){d.local=u.src;break}d.local||(d.local=a)}f={xdm_c:d.channel,xdm_p:0};d.local===a?(d.usePolling=!0,d.useParent=!0,d.local=b.protocol+"//"+b.host+b.pathname+b.search,f.xdm_e=d.local,f.xdm_pa=1):f.xdm_e=s(d.local);d.container&&(d.useResize=
!1,f.xdm_po=1);d.remote=p(d.remote,f)}else t(d,{channel:w.xdm_c,remote:w.xdm_e,useParent:!q(w.xdm_pa),usePolling:!q(w.xdm_po),useResize:d.useParent?!1:d.useResize});h=[new l.stack.HashTransport(d),new l.stack.ReliableBehavior({}),new l.stack.QueueBehavior({encode:!0,maxLength:4E3-d.remote.length}),new l.stack.VerifyBehavior({initiate:d.isHost})];break;case "1":h=[new l.stack.PostMessageTransport(d)];break;case "2":d.remoteHelper=s(d.remoteHelper);h=[new l.stack.NameTransport(d),new l.stack.QueueBehavior,
new l.stack.VerifyBehavior({initiate:d.isHost})];break;case "3":h=[new l.stack.NixTransport(d)];break;case "4":h=[new l.stack.SameOriginTransport(d)];break;case "5":h=[new l.stack.FrameElementTransport(d)];break;case "6":C||g(),h=[new l.stack.FlashTransport(d)]}h.push(new l.stack.QueueBehavior({lazy:d.lazy,remove:!0}));return h}function S(a){for(var b,c={incoming:function(a,b){this.up.incoming(a,b)},outgoing:function(a,b){this.down.outgoing(a,b)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},
destroy:function(){this.down.destroy()}},d=0,e=a.length;d<e;d++)b=a[d],t(b,c,!0),0!==d&&(b.down=a[d-1]),d!==e-1&&(b.up=a[d+1]);return b}function Y(a){a.up.down=a.down;a.down.up=a.up;a.up=a.down=null}var M=this,V=Math.floor(1E4*Math.random()),P=Function.prototype,K=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,T=/[\-\w]+\/\.\.\//,Z=/([^:])\/\//g,H="",l={},$=a.easyXDM,x="easyXDM_",L,U=!1,C,O,y,F;if(e(a,"addEventListener"))y=function(a,b,c){a.addEventListener(b,c,!1)},F=function(a,b,c){a.removeEventListener(b,
c,!1)};else if(e(a,"attachEvent"))y=function(a,b,c){a.attachEvent("on"+b,c)},F=function(a,b,c){a.detachEvent("on"+b,c)};else throw Error("Browser not supported");var D=!1,J=[],N;"readyState"in c?(N=c.readyState,D="complete"==N||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==N||"interactive"==N)):D=!!c.body;if(!D){if(e(a,"addEventListener"))y(c,"DOMContentLoaded",k);else if(y(c,"readystatechange",function(){"complete"==c.readyState&&k()}),c.documentElement.doScroll&&a===top){var W=function(){if(!D){try{c.documentElement.doScroll("left")}catch(a){d(W,
1);return}k()}};W()}y(a,"load",k)}var w=function(a){a=a.substring(1).split("&");for(var b={},c,d=a.length;d--;)c=a[d].split("="),b[c[0]]=h(c[1]);return b}(/xdm_e=/.test(b.search)?b.search:b.hash),Q=function(){var a={},b={a:[1,2,3]};if("undefined"!=typeof JSON&&"function"===typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(b).replace(/\s/g,""))return JSON;Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(b).replace(/\s/g,"")&&(a.stringify=Object.toJSON);"function"===typeof String.prototype.evalJSON&&
(b='{"a":[1,2,3]}'.evalJSON(),b.a&&(3===b.a.length&&3===b.a[2])&&(a.parse=function(a){return a.evalJSON()}));return a.stringify&&a.parse?(Q=function(){return a},a):null};t(l,{version:"2.4.16.3",query:w,stack:{},apply:t,getJSONObject:Q,whenReady:m,noConflict:function(b){a.easyXDM=$;(H=b)&&(x="easyXDM_"+H.replace(".","_")+"_");return l}});l.DomHelper={on:y,un:F,requiresJSON:function(b){"object"==typeof a.JSON&&a.JSON||c.write('<script type="text/javascript" src="'+b+'">\x3c/script>')}};(function(){var a=
{};l.Fn={set:function(b,c){a[b]=c},get:function(b,c){var d=a[b];c&&delete a[b];return d}}})();l.Socket=function(a){var b=S(R(a).concat([{incoming:function(b,c){a.onMessage(b,c)},callback:function(b){if(a.onReady)a.onReady(b)}}])),c=n(a.remote);this.origin=n(a.remote);this.destroy=function(){b.destroy()};this.postMessage=function(a){b.outgoing(a,c)};b.init()};l.Rpc=function(a,b){if(b.local)for(var c in b.local)if(b.local.hasOwnProperty(c)){var d=b.local[c];"function"===typeof d&&(b.local[c]={method:d})}var e=
S(R(a).concat([new l.stack.RpcBehavior(this,b),{callback:function(b){if(a.onReady)a.onReady(b)}}]));this.origin=n(a.remote);this.destroy=function(){e.destroy()};e.init()};l.stack.SameOriginTransport=function(a){var c,e,f,g;return c={outgoing:function(a,b,c){f(a);c&&c()},destroy:function(){e&&(e.parentNode.removeChild(e),e=null)},onDOMReady:function(){g=n(a.remote);a.isHost?(t(a.props,{src:p(a.remote,{xdm_e:b.protocol+"//"+b.host+b.pathname,xdm_c:a.channel,xdm_p:4}),name:x+a.channel+"_provider"}),
e=B(a),l.Fn.set(a.channel,function(a){f=a;d(function(){c.up.callback(!0)},0);return function(a){c.up.incoming(a,g)}})):(f=r().Fn.get(a.channel,!0)(function(a){c.up.incoming(a,g)}),d(function(){c.up.callback(!0)},0))},init:function(){m(c.onDOMReady,c)}}};l.stack.FlashTransport=function(a){function e(a,b){d(function(){g.up.incoming(a,k)},0)}function f(b){var d=a.swf+"?host="+a.isHost,e="easyXDM_swf_"+Math.floor(1E4*Math.random());l.Fn.set("flash_loaded"+b.replace(/[\-.]/g,"_"),function(){l.stack.FlashTransport[b].swf=
z=G.firstChild;for(var a=l.stack.FlashTransport[b].queue,c=0;c<a.length;c++)a[c]();a.length=0});a.swfContainer?G="string"==typeof a.swfContainer?c.getElementById(a.swfContainer):a.swfContainer:(G=c.createElement("div"),t(G.style,O&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),c.body.appendChild(G));var g="callback=flash_loaded"+b.replace(/[\-.]/g,"_")+"&proto="+M.location.protocol+"&domain="+
M.location.href.match(K)[3]+"&port="+(M.location.href.match(K)[4]||"")+"&ns="+H;G.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+e+"' data='"+d+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+d+"'></param><param name='flashvars' value='"+g+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+g+"' allowScriptAccess='always' wmode='transparent' src='"+d+"' height='1' width='1'></embed></object>"}
var g,h,k,z,G;return g={outgoing:function(b,c,d){z.postMessage(a.channel,b.toString());d&&d()},destroy:function(){try{z.destroyChannel(a.channel)}catch(b){}z=null;h&&(h.parentNode.removeChild(h),h=null)},onDOMReady:function(){k=a.remote;l.Fn.set("flash_"+a.channel+"_init",function(){d(function(){g.up.callback(!0)})});l.Fn.set("flash_"+a.channel+"_onMessage",e);a.swf=s(a.swf);var c=a.swf.match(K)[3],m=function(){l.stack.FlashTransport[c].init=!0;z=l.stack.FlashTransport[c].swf;z.createChannel(a.channel,
a.secret,n(a.remote),a.isHost);a.isHost&&(O&&a.swfNoThrottle&&t(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),t(a.props,{src:p(a.remote,{xdm_e:n(b.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:x+a.channel+"_provider"}),h=B(a))};l.stack.FlashTransport[c]&&l.stack.FlashTransport[c].init?m():l.stack.FlashTransport[c]?l.stack.FlashTransport[c].queue.push(m):(l.stack.FlashTransport[c]={queue:[m]},f(c))},init:function(){m(g.onDOMReady,g)}}};l.stack.PostMessageTransport=function(c){function e(a){var d;
if(a.origin)d=n(a.origin);else if(a.uri)d=n(a.uri);else if(a.domain)d=b.protocol+"//"+a.domain;else throw"Unable to retrieve the origin of the event";d==k&&a.data.substring(0,c.channel.length+1)==c.channel+" "&&f.up.incoming(a.data.substring(c.channel.length+1),d)}var f,g,h,k;return f={outgoing:function(a,b,d){h.postMessage(c.channel+" "+a,b||k);d&&d()},destroy:function(){F(a,"message",e);g&&(h=null,g.parentNode.removeChild(g),g=null)},onDOMReady:function(){k=n(c.remote);if(c.isHost){var m=function(b){b.data==
c.channel+"-ready"&&(h="postMessage"in g.contentWindow?g.contentWindow:g.contentWindow.document,F(a,"message",m),y(a,"message",e),d(function(){f.up.callback(!0)},0))};y(a,"message",m);t(c.props,{src:p(c.remote,{xdm_e:n(b.href),xdm_c:c.channel,xdm_p:1}),name:x+c.channel+"_provider"});g=B(c)}else y(a,"message",e),h="postMessage"in a.parent?a.parent:a.parent.document,h.postMessage(c.channel+"-ready",k),d(function(){f.up.callback(!0)},0)},init:function(){m(f.onDOMReady,f)}}};l.stack.FrameElementTransport=
function(e){var f,g,h,k;return f={outgoing:function(a,b,c){h.call(this,a);c&&c()},destroy:function(){g&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){k=n(e.remote);e.isHost?(t(e.props,{src:p(e.remote,{xdm_e:n(b.href),xdm_c:e.channel,xdm_p:5}),name:x+e.channel+"_provider"}),g=B(e),g.fn=function(a){delete g.fn;h=a;d(function(){f.up.callback(!0)},0);return function(a){f.up.incoming(a,k)}}):(c.referrer&&n(c.referrer)!=w.xdm_e&&(a.top.location=w.xdm_e),h=a.frameElement.fn(function(a){f.up.incoming(a,
k)}),f.up.callback(!0))},init:function(){m(f.onDOMReady,f)}}};l.stack.NameTransport=function(a){function b(c){k.contentWindow.sendMessage(c,a.remoteHelper+(h?"#_3":"#_2")+a.channel)}function c(){h?(2===++v||!h)&&g.up.callback(!0):(b("ready"),g.up.callback(!0))}function e(a){g.up.incoming(a,I)}function f(){A&&d(function(){A(!0)},0)}var g,h,k,r,v,A,I,X;return g={outgoing:function(a,c,d){A=d;b(a)},destroy:function(){k.parentNode.removeChild(k);k=null;h&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){h=
a.isHost;v=0;I=n(a.remote);a.local=s(a.local);h?(l.Fn.set(a.channel,function(b){h&&"ready"===b&&(l.Fn.set(a.channel,e),c())}),X=p(a.remote,{xdm_e:a.local,xdm_c:a.channel,xdm_p:2}),t(a.props,{src:X+"#"+a.channel,name:x+a.channel+"_provider"}),r=B(a)):(a.remoteHelper=a.remote,l.Fn.set(a.channel,e));var b=function(){var e=k||this;F(e,"load",b);l.Fn.set(a.channel+"_load",f);(function ba(){"function"==typeof e.contentWindow.sendMessage?c():d(ba,50)})()};k=B({props:{src:a.local+"#_4"+a.channel},onLoad:b})},
init:function(){m(g.onDOMReady,g)}}};l.stack.HashTransport=function(b){function c(){if(l){var a=l.location.href,b="",d=a.indexOf("#");-1!=d&&(b=a.substring(d));b&&b!=k&&(k=b,e.up.incoming(k.substring(k.indexOf("_")+1),I))}}var e,f,g,h,k,p,l,v,A,I;return e={outgoing:function(a,c){if(v){var d=b.remote+"#"+p++ +"_"+a;(f||!A?v.contentWindow:v).location=d}},destroy:function(){a.clearInterval(g);(f||!A)&&v.parentNode.removeChild(v);v=null},onDOMReady:function(){f=b.isHost;h=b.interval;k="#"+b.channel;p=
0;A=b.useParent;I=n(b.remote);if(f){t(b.props,{src:b.remote,name:x+b.channel+"_provider"});if(A)b.onLoad=function(){l=a;g=setInterval(c,h);e.up.callback(!0)};else{var m=0,s=b.delay/50;(function aa(){if(++m>s)throw Error("Unable to reference listenerwindow");try{l=v.contentWindow.frames[x+b.channel+"_consumer"]}catch(a){}l?(g=setInterval(c,h),e.up.callback(!0)):d(aa,50)})()}v=B(b)}else l=a,g=setInterval(c,h),A?(v=parent,e.up.callback(!0)):(t(b,{props:{src:b.remote+"#"+b.channel+new Date,name:x+b.channel+
"_consumer"},onLoad:function(){e.up.callback(!0)}}),v=B(b))},init:function(){m(e.onDOMReady,e)}}};l.stack.ReliableBehavior=function(a){var b,c,d=0,e=0,f="";return b={incoming:function(a,g){var h=a.indexOf("_"),k=a.substring(0,h).split(",");a=a.substring(h+1);k[0]==d&&(f="",c&&(c(!0),c=null));0<a.length&&(b.down.outgoing(k[1]+","+d+"_"+f,g),e!=k[1]&&(e=k[1],b.up.incoming(a,g)))},outgoing:function(a,g,h){f=a;c=h;b.down.outgoing(e+","+ ++d+"_"+a,g)}}};l.stack.QueueBehavior=function(a){function b(){if(a.remove&&
0===e.length)Y(c);else if(!g&&!(0===e.length||m)){g=!0;var f=e.shift();c.down.outgoing(f.data,f.origin,function(a){g=!1;f.callback&&d(function(){f.callback(a)},0);b()})}}var c,e=[],g=!0,k="",m,p=0,l=!1,n=!1;return c={init:function(){q(a)&&(a={});a.maxLength&&(p=a.maxLength,n=!0);a.lazy?l=!0:c.down.init()},callback:function(a){g=!1;var d=c.up;b();d.callback(a)},incoming:function(b,d){if(n){var e=b.indexOf("_"),f=parseInt(b.substring(0,e),10);k+=b.substring(e+1);0===f&&(a.encode&&(k=h(k)),c.up.incoming(k,
d),k="")}else c.up.incoming(b,d)},outgoing:function(d,g,h){a.encode&&(d=f(d));var k=[],m;if(n){for(;0!==d.length;)m=d.substring(0,p),d=d.substring(m.length),k.push(m);for(;m=k.shift();)e.push({data:k.length+"_"+m,origin:g,callback:0===k.length?h:null})}else e.push({data:d,origin:g,callback:h});l?c.down.init():b()},destroy:function(){m=!0;c.down.destroy()}}};l.stack.VerifyBehavior=function(a){function b(){d=Math.random().toString(16).substring(2);c.down.outgoing(d)}var c,d,e;return c={incoming:function(f,
g){var h=f.indexOf("_");-1===h?f===d?c.up.callback(!0):e||(e=f,a.initiate||b(),c.down.outgoing(f)):f.substring(0,h)===e&&c.up.incoming(f.substring(h+1),g)},outgoing:function(a,b,e){c.down.outgoing(d+"_"+a,b,e)},callback:function(c){a.initiate&&b()}}};l.stack.RpcBehavior=function(a,b){function c(a){a.jsonrpc="2.0";f.down.outgoing(g.stringify(a))}function d(a,b){var e=Array.prototype.slice;return function(){var d=arguments.length,f,g={method:b};0<d&&"function"===typeof arguments[d-1]?(1<d&&"function"===
typeof arguments[d-2]?(f={success:arguments[d-2],error:arguments[d-1]},g.params=e.call(arguments,0,d-2)):(f={success:arguments[d-1]},g.params=e.call(arguments,0,d-1)),k[""+ ++h]=f,g.id=h):g.params=e.call(arguments,0);a.namedParams&&1===g.params.length&&(g.params=g.params[0]);c(g)}}function e(a,b,d,f){if(d){var g,h;b?(g=function(a){g=P;c({id:b,result:a})},h=function(a,d){h=P;var e={id:b,error:{code:-32099,message:a}};d&&(e.error.data=d);c(e)}):g=h=P;"[object Array]"!==Object.prototype.toString.call(f)&&
(f=[f]);try{var k=d.method.apply(d.scope,f.concat([g,h]));q(k)||g(k)}catch(m){h(m.message)}}else b&&c({id:b,error:{code:-32601,message:"Procedure not found."}})}var f,g=b.serializer||Q(),h=0,k={};return f={incoming:function(a,d){var f=g.parse(a);if(f.method)b.handle?b.handle(f,c):e(f.method,f.id,b.local[f.method],f.params);else{var h=k[f.id];f.error?h.error&&h.error(f.error):h.success&&h.success(f.result);delete k[f.id]}},init:function(){if(b.remote)for(var c in b.remote)b.remote.hasOwnProperty(c)&&
(a[c]=d(b.remote[c],c));f.down.init()},destroy:function(){for(var c in b.remote)b.remote.hasOwnProperty(c)&&a.hasOwnProperty(c)&&delete a[c];f.down.destroy()}}};M.easyXDM=l})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);YUI.add("thirdparty-easyxdm",function(a){},"2.4.16");
YUI.add("squarespace-dialog-check-template",function(a){var c=a.Handlebars;(function(){var a=c.template;(c.templates=c.templates||{})["dialog-check.html"]=a(function(a,b,c,e,g){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);g=g||{};var k,m=this.escapeExpression;a='<div class="check-element ';if((e=c["if"].call(b,b.data,{hash:{},inverse:this.noop,fn:this.program(1,function(a,b){return"active"},g),data:g}))||0===e)a+=e;a+='">\n  ';if((k=c["if"].call(b,(e=b.strings,null==e||!1===e?e:e.title),
{hash:{},inverse:this.noop,fn:this.program(3,function(a,b){var c,d;return c=""+('\n    <div class="title">'+m((d=(d=a.strings,null==d||!1===d?d:d.title),"function"===typeof d?d.apply(a):d))+"</div>\n  ")},g),data:g}))||0===k)a+=k;a+="\n  ";if((k=c["if"].call(b,(e=b.strings,null==e||!1===e?e:e.description),{hash:{},inverse:this.noop,fn:this.program(5,function(a,b){var c,d;return c=""+('\n    <div class="description">'+m((d=(d=a.strings,null==d||!1===d?d:d.description),"function"===typeof d?d.apply(a):
d))+"</div>\n  ")},g),data:g}))||0===k)a+=k;return a+"\n</div>"})})();a.Handlebars.registerPartial("dialog-check.html".replace("/","."),c.templates["dialog-check.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-login",function(a){var c,b,d,h;switch(!1){case "loginWithSocialAccounts":c=!0;h=d=b=void 0;break;case "commentsLogin":h=d=b=c=!0;break;case "acceptInvitation":d=!0,h=b=c=void 0}a.config.win.SQUARESPACE_LOGIN||(a.config.win.SQUARESPACE_LOGIN=Singleton.create({ready:function(){Static.SQUARESPACE_CONTEXT&&(this.account=Static.SQUARESPACE_CONTEXT.authenticatedAccount);this.params=this.defaultParams={redirectAfterCancel:!0,redirectAfterLogin:!0,minimal:!1,cancelable:!0,overlayOpacity:0.8,
disableOverlayCancel:!1,forgotPassword:!0,disableCreateAccount:!0,globalLogin:!0,allowSocialLogins:!0};this.dialogParameters=null},configure:function(b){this.params=this.defaultParams;this.params=a.merge(this.params,b)},reset:function(){this.params=this.defaultParams},isLoggedIn:function(){return!!this.account},getAccount:function(){return this.account},_getNoLoginDialogParmas:function(){return{style:"flyout",discardChangesConfirmation:!1,overlay:this.params.overlayOpacity,width:400,closeOthers:!1,
closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,tabs:[{title:"Squarespace Login",icon:"/universal/images-v6/dialog/login-icon.png?4",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"This browser does not accept cookies, which is a requirement for login. You can allow cookies by changing your browser's settings."}}]}]}},showSquarespaceLogo:function(){var b=a.one(".six-icon");b||(b=a.Node.create('<div class="six-icon"></div>'),b.addClass("animated-squarespace-logo"),
b.appendChild(a.Node.create('<div class="six-icon-inside"></div>')),a.one(document.body).append(b));var c=new Image;c.onload=function(){var d=b.one(".six-icon-inside");d.setStyles({backgroundImage:"url("+c.src+")"});a.later(500,this,function(){JSTween.tween(d.getDOMNode(),{transform:{start:"scale(1.4) rotate(10deg)",stop:"scale(1) rotate(0deg)",time:0,duration:2,effect:"easeOut"},opacity:{start:0,stop:100,duration:1,time:0}});JSTween.play()})};c.src="/universal/images-v6/logo/logo.png"},showCommentLogin:function(a,
b,c){this.iFrameCommentLoginShow(a,b,c)},_showCommentLoginIniFrame:function(b,c,d,h){if(a.Squarespace.Utils.areCookiesEnabled()){var m=["squarespace","google","twitter","facebook"],r="squarespace";d&&(m.splice(0,0,"guest"),r="guest");var n=new a.Squarespace.Widgets.Login({render:!0,tabsEnabled:m,activeLoginMethod:r,returnWebsiteList:!1,canCreateAccount:!0,canCancel:!0,title:b,targetIdentifier:h,className:"comments","strings.loginButonTitle":c});n.on("loginSuccess",function(a){SQUARESPACE_LOGIN.loginRPCProvider.commentLoginSuccess({type:a.type,
displayName:a.displayName,email:a.email,authorUrl:a.authorUrl,account:a.account,website:a.website});SQUARESPACE_LOGIN.loginRPCProvider.remove(!1);n.destroy()},this);n.on("destroy",function(){SQUARESPACE_LOGIN.loginRPCProvider.remove(!1)},this);n.on("cancel",function(){SQUARESPACE_LOGIN.loginRPCProvider.remove(!0)},this);a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")})}else b=this._getNoLoginDialogParmas(),(new a.Squarespace.EditingDialog(b)).show()},showGoogleWebhostingLogin:function(){if(a.Squarespace.Utils.areCookiesEnabled()){var b=
new a.Squarespace.Widgets.Login({render:!0,enableGoogleLoginLink:!0,tabsEnabled:["squarespace"],returnWebsiteList:!0,activeLoginMethod:"squarespace"});b.on("loginSuccess",function(c){var d=this._getGoogleWebhostingConfirmUrl();b.destroy({remove:!0});this._websiteDisambiguation(c.websites,c.account,"Select the website you would like to add the domain to").then(function(b){b=b.get("loginUrl")+"&redirectUrl="+encodeURIComponent(d);a.config.win.location=b},function(a){console.log("Failed to Disambiguate",
a)});a.Squarespace.Analytics.trackInternal("engagement_site_disambiguation",{disambiguationType:"domain_linkage"})},this);a.Squarespace.Analytics.trackInternal("engagement_login_overview_view");a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")})}else{var c=this._getNoLoginDialogParmas();(new a.Squarespace.EditingDialog(c)).show()}},_getGoogleWebhostingConfirmUrl:function(){var b=a.Squarespace.GoogleDomains.getGoogleDomainUrlParams();return"/auth/google-web-hosting/add-domain-confirmation?domainName="+
b.domainName+"&userId="+b.userId},_websiteDisambiguation:function(b,c,d){return new a.Promise(function(h,m){var r=new a.Squarespace.Models.ModelList;a.Array.each(b,function(b){r.add(new a.Model(b))});1===r.size()&&h(r.item(0));var n=new a.Squarespace.Widgets.WebsiteSelector({memberAccount:new a.Squarespace.Models.MemberAccount(c),websites:r,title:d});n.render();n.on("selectedWebsiteChange",function(b){a.Lang.isValue(b.newVal)&&(n.destroy({remove:!0}),h(b.newVal))},this)})},acceptInvitationSignin:function(b){if(a.Squarespace.Utils.areCookiesEnabled()){var c=
Static.SQUARESPACE_CONTEXT.website.identifier;b="<p>You have been invited to manage "+a.Escape.html(Static.SQUARESPACE_CONTEXT.website.authenticUrl)+" by <strong>"+a.Escape.html(b.displayName)+"</strong>. Sign in or create an account below to get started.</p>";var d=new a.Squarespace.Widgets.Login({render:!0,tabsEnabled:[],canCreateAccount:!0,targetIdentifier:c,title:"<h1>Accept Invitation</h1>"+b});d.on("loginSuccess",function(a){d.destroy();a=a.website.loginUrl+"&redirectUrl="+encodeURIComponent(window.location.pathname+
window.location.search);window.location.replace(a)});a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")})}else c=this._getNoLoginDialogParmas(),(new a.Squarespace.EditingDialog(c)).show()},show:function(){if(a.Squarespace.Utils.areCookiesEnabled()){var f=a.Cookie.get("email"),e=["squarespace"],g=!0;if(Static.SQUARESPACE_CONTEXT.hasSocialAccounts||c)e=["squarespace","google","twitter","facebook"],g=!1;b&&e.push("guest");var k={};d&&(k.canCreateAccount=!0);h&&(k.canCancel=!0);f=new a.Squarespace.Widgets.Login(a.merge({render:!0,
enableGoogleLoginLink:g,tabsEnabled:e,returnWebsiteList:!0,email:f},k));f.plug(a.Squarespace.Plugin.V5Login);if(this.loginRPCProvider)f.on("destroy",function(a){this.loginRPCProvider.remove()},this);f.on("loginSuccess",function(b){a.one(a.config.doc.body).removeClass("login-visible");a.Lang.isObject(b.account)&&a.Lang.isString(b.account.email)&&("v6"===b.type||"v5"===b.type)&&a.Cookie.set("email",b.account.email);"v5"===b.type?top.window.location.replace(b.url):a.Lang.isString(b.redirectUrl)?top.window.location.replace(b.redirectUrl):
a.Lang.isObject(b.website)?(b=b.website.loginUrl+"&redirectUrl="+encodeURIComponent("/config"),top.window.location.replace(b)):(new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":"Login Failed","strings.message":"We could not find a website you have access to for the account you signed in with."}),a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")}))},this);a.soon(function(){a.one(a.config.doc.body).addClass("login-visible")})}else f=
this._getNoLoginDialogParmas(),(new a.Squarespace.EditingDialog(f)).show()},onEscape:function(){a.one("body").removeClass("login-visible");a.later(300,this,function(){a.config.win.location.href="http://"+a.config.win.location.host+"/"})},createSquarespaceAccount:function(){if(!this.createAccountDialog){var b={name:"squarespace-signup",loadingText:"Loading...",savingText:"Submitting...",closingText:"",style:"flyout",width:460,top:200,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,
title:"Create Squarespace Account",buttons:[{type:"cancel",title:"Cancel"},{type:"saveAndClose",title:"Create Account"}],tabs:[{title:"",fields:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"<strong>Below you can sign up for a Squarespace account.</strong>  Squarespace accounts let you keep a profile for editing and commenting on Squarespace websites.",padding:[0,15]}},{type:"splitter",fields:[{ctor:a.Squarespace.DialogFields.Text,config:{width:0.5,name:"firstName",strings:{placeholder:"First Name"},
submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.Text,config:{width:0.5,name:"lastName",strings:{placeholder:"Last Name"},submitOnEnter:!0}}]},{ctor:a.Squarespace.DialogFields.Text,config:{name:"email",strings:{placeholder:"Email Address"},submitOnEnter:!0}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"password",strings:{placeholder:"Password"},password:!0,submitOnEnter:!0}}]}]};this.params.minimal?(b.style="transparent",b.tabs[0].fields[0]=null,b.top=260):(b.style=null,b.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png");
this.createAccountDialog=new a.Squarespace.EditingDialog(b)}this.params.invitation&&this.createAccountDialog.setInitialData({email:this.params.invitation.email});this.createAccountDialog.show();return this.createAccountDialog},getPasswordResetDialogParams:function(b){var c={loadingText:"Loading...",savingText:"",closingText:"",style:"minimal",width:460,top:280,closeOthers:!1,closeable:!this.params.disableOverlayCancel,disableOverlayCancel:this.params.disableOverlayCancel,buttons:[b.invalidRecoveryId?
{type:"login",title:"Back To Login"}:{type:"saveAndClose",title:"Update"}],tabs:[{title:"",fields:[]}]};c.tabs[0].fields=b.invalidRecoveryId?[{ctor:a.Squarespace.DialogFields.Description,config:{text:"This URL is no longer valid, please go back to login and start over."}}]:[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Hi, <strong>"+a.Escape.html(b.displayName)+"</strong>"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:"Please enter your new account password for the account with email: <strong>"+
b.email+"</strong>."}},{ctor:a.Squarespace.DialogFields.Text,config:{name:"password",strings:{placeholder:"New Password"},password:!0,submitOnEnter:!0}}];c.tabs[0].title="Password Reset";c.tabs[0].icon="/universal/images-v6/dialog/dialog-icon-member.png";return c},bindPasswordResetDialog:function(b,c){b.on("button-login",function(){document.location.replace(document.location.pathname)});b.on("send-requested",function(){var c=this.dialog.getData();c.email=this.params.email;c.recoveryId=this.params.recoveryId;
a.Data.sendForm(this.dialog,{data:c,url:"/api/auth/PasswordReset",secure:!0,success:function(a){this.dialog.close();document.location.replace(document.location.pathname)}},{that:this.that,dialog:b})},{dialog:b,params:c})},passwordResetConfirmation:function(b){var c=this.getPasswordResetDialogParams(b),c=new a.Squarespace.EditingDialog(c);this.bindPasswordResetDialog(c,b);c.show()},accountActivationConfirmation:function(b){b.recoveryId=b.activationId;var c=this.getPasswordResetDialogParams(b);b.invalidRecoveryId||
(c.tabs[0].fields=[{ctor:a.Squarespace.DialogFields.Description,config:{text:"Welcome, <strong>"+a.Escape.html(b.displayName)+"</strong>"}},{ctor:a.Squarespace.DialogFields.Description,config:{text:"To Activate your account you need to first set your account password associated with the email: <strong>"+b.email+"</strong>."}},{type:"text",required:!0,name:"password",password:!0,title:"New Password",style:"title",titleStyle:"inline",submitOnEnter:!0}],c.tabs[0].title="Activate Account");c=new a.Squarespace.EditingDialog(c);
this.bindPasswordResetDialog(c,b);c.show()},onLoginComplete:function(b,c){a.config.win.SQUARESPACE_LOGIN.account=b;a.Squarespace.Utils.userHasAccessPermission(a.Squarespace.AccessPermissions.CONFIG);SQUARESPACE_LOGIN.loginRPCProvider&&c?a.config.win.SQUARESPACE_LOGIN.fire("iframeLogin",c):this.params.redirectAfterLogin||this.params.reloadAfterLogin?c?c===a.config.win.location.href?a.config.win.location.reload():a.config.win.location.replace(c):new a.Squarespace.Widgets.Alert({"strings.title":"No Administrative Privileges",
"strings.message":"Your Squarespace account is not listed as an administrator on any sites."}):(a.config.win.SQUARESPACE_LOGIN.fire("login"),this.params.globalLogin&&a.Global.fire("squarespace:login"),this.reset())},onCommentLoginSuccess:function(b){if("guest"===b.type){var c=new Date;c.setSeconds(c.getSeconds()+30);a.Cookie.set("email",b.email,{path:"/",expires:c});a.Cookie.set("displayName",b.displayName,{path:"/",expires:c});a.Cookie.set("websiteUrl",b.authorUrl,{path:"/",expires:c});a.config.win.SQUARESPACE_LOGIN.fire("guestLogin");
this.params.globalLogin&&a.Global.fire("squarespace:login")}else{var d=b.account;a.Data.get({url:b.website.loginUrl,secure:!0,success:function(){Static.SQUARESPACE_CONTEXT.authenticatedAccount=d;a.config.win.SQUARESPACE_LOGIN.account=d;a.config.win.SQUARESPACE_LOGIN.fire("login");this.params.globalLogin&&a.Global.fire("squarespace:login")},failure:function(b){new a.Squarespace.Widgets.Alert({position:a.Squarespace.Widgets.Confirmation.ANCHOR.CENTER,"strings.title":"Login Failed","strings.message":"An unexpected error happened, please try again."});
console.error("failed to sign in with token",b)}},this)}},_buildIFrameLoginDialog:function(){this.buildDialog()},_showLoginInIframe:function(b,c,d){this.show();a.Lang.isValue(this.loginRPCProvider)?(b=a.Node.create('<div class="overlay" style="position: fixed; top: 0; right:0; height: 100%; width: 100%; z-index: 30000; background: #efefef; opacity: 1;"><div class="close-x"></div></div>'),a.one("body").append(b),b.on("click",function(a){SQUARESPACE_LOGIN.loginRPCProvider.remove()},this)):(a.one("html").addClass("squarespace-damask"),
a.one("html").removeClass("squarespace-cameron"),a.one("body").addClass("squarespace-login"))},loadRPCProvider:function(){try{this.loginRPCProvider=new easyXDM.Rpc({},{local:{show:function(){SQUARESPACE_LOGIN._showLoginInIframe()},showCommentLogin:SQUARESPACE_LOGIN._showCommentLoginIniFrame},remote:{remove:{},v5LoginRequest:{},commentLoginSuccess:{}}})}catch(a){console.log("failed to load RPC",a)}},_loadRPCConsumer:function(b,c){this.loginRPCConsumer=new easyXDM.Rpc({remote:"https://oauth."+Static.SQUARESPACE_CONTEXT.appDomain+
"/config/iframeLogin",container:b,onReady:c,props:{style:{width:"100%",height:"100%",top:0,left:0,position:"fixed",zIndex:30040}}},{local:{remove:function(a){SQUARESPACE_LOGIN.iFrameLoginRemove(a)},v5LoginRequest:function(b,c,d,e){a.Squarespace.Auth.loginV5(b,c).then(d,e)},commentLoginSuccess:a.bind(this.onCommentLoginSuccess,this)},remote:{show:{},showCommentLogin:{}}})},iFrameLoginLoad:function(b){var c=a.Node.create('<div class="login-wrapper hidden" ></div>');a.one("body").append(c);this._loadRPCConsumer(c.getDOMNode(),
b)},_getLoginOverlayNode:function(){var b=a.Node.create('<div class="login-overlay" style="position: fixed; top: 0; right:0; height: 100%; width: 100%; z-index: 30000; background: rgba(204, 204, 204, 0.65);"></div>');this._loginOverlaySpinner=new a.Squarespace.Spinner({render:b,size:"large",color:"dark"});this._loginOverlaySpinner.get("boundingBox").setStyles({position:"fixed",top:"50%",left:"50%",marginLeft:"-11px",marginTop:"-11px"});return b},iFrameLoginShow:function(b){b&&b.preventDefault();b=
this._getLoginOverlayNode();a.one("body").append(b);this.loginRPCConsumer?this._iFrameLoginShow():SQUARESPACE_LOGIN.iFrameLoginLoad(a.bind(this._iFrameLoginShow,this))},_iFrameLoginShow:function(){this.loginRPCConsumer.show();a.one(".login-wrapper").removeClass("hidden");this._loginOverlaySpinner&&this._loginOverlaySpinner.destroy()},iFrameCommentLoginShow:function(b,c,d){var h=this._getLoginOverlayNode();a.one("body").append(h);this.loginRPCConsumer?this._iFrameCommentLoginShow(b,c,d):SQUARESPACE_LOGIN.iFrameLoginLoad(a.bind(this._iFrameCommentLoginShow,
this,b,c,d))},_iFrameCommentLoginShow:function(b,c,d){this.loginRPCConsumer.showCommentLogin(b,c,d,Static.SQUARESPACE_CONTEXT.website.identifier);a.one(".login-wrapper").removeClass("hidden");this._loginOverlaySpinner&&this._loginOverlaySpinner.destroy()},iFrameLoginHide:function(){this.overlay.hideScreenOverlay();a.one(".login-wrapper").addClass("hidden")},iFrameLoginRemove:function(b){this.loginRPCConsumer.destroy();delete this.loginRPCConsumer;a.one(".login-overlay").remove();a.one(".login-wrapper").remove();
b&&this.fire("cancel")}}),a.augment(a.config.win.SQUARESPACE_LOGIN,a.EventTarget))},"1.0",{requires:"squarespace-util squarespace-dialog squarespace-dialog-hidden squarespace-external-authentication squarespace-enum thirdparty-easyxdm thirdparty-sha1 squarespace-dialog-description squarespace-external-authentication squarespace-dialog-multi-option squarespace-dialog-check squarespace-google-domains-utils squarespace-models-member-account squarespace-widgets-website-selector squarespace-widgets-login squarespace-plugin-v5login squarespace-widgets-website-selector squarespace-widgets-alert squarespace-dialog-text squarespace-spinner".split(" ")});
YUI.add("squarespace-widgets-website-template",function(a){var c=a.Handlebars;(function(){var a=c.template;(c.templates=c.templates||{})["widgets-website.html"]=a(function(a,b,c,e,g){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);g=g||{};e=this.escapeExpression;a='<div class="website" data-site-id="';(c=c.id)?c=c.call(b,{hash:{},data:g}):(c=b.id,c="function"===typeof c?c.apply(b):c);return a+=e(c)+'">\n\n  <div class="favicon"><img src="'+e((c=b.faviconURL,"function"===typeof c?c.apply(b):
c))+'" alt="'+e((c=b.siteTitle,"function"===typeof c?c.apply(b):c))+' favicon">\n  </div>\n\n  <div class="site-desc">\n    <span class="title">'+e((c=b.siteTitle,"function"===typeof c?c.apply(b):c))+'</span>\n    <span class="url">'+e((c=b.url,"function"===typeof c?c.apply(b):c))+"</span>\n  </div>\n\n</div>\n"})})();a.Handlebars.registerPartial("widgets-website.html".replace("/","."),c.templates["widgets-website.html"])},"1.0",{requires:["handlebars-base"]});
YUI.add("squarespace-session-storage",function(a){a.namespace("Squarespace");var c=function(){return a.Lang.isValue(window.localStorage)};a.Squarespace.SessionStorage={saveSessionData:function(b,d,h){d={value:d};a.Lang.isDate(h)?d.expires=h.getTime():h=null;d=btoa(a.JSON.stringify(d));c()?window.localStorage.setItem(b,d):null===h?a.Cookie.set(b,d,{path:"/"}):a.Cookie.set(b,d,{path:"/",expires:h})},getSessionData:function(b){var d;d=c()?window.localStorage.getItem(b):a.Cookie.get(b);if(!a.Lang.isValue(d))return null;
d=a.JSON.parse(atob(d));return a.Lang.isNumber(d.expires)&&d.expires<(new Date).getTime()?(c()&&window.localStorage.removeItem(b),null):d.value},removeSessionData:function(b){c()&&window.localStorage.removeItem(b);a.Cookie.remove(b)}}},"1.0",{requires:["base","cookie"]});
YUI.add("squarespace-widgets-website-list",function(a){a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.WebsiteList=a.Base.create("WebsiteList",a.Squarespace.Widgets.ModelList,[a.WidgetChild],{syncUI:function(){c.superclass.syncUI.call(this);var b=this.get("strings.title");a.Lang.isString(b)&&this.get("contentBox").insert(a.Node.create('<div class="list-title">'+b+"</div>"),0)},bindUI:function(){this.after("selectionChange",function(b){b=b.newVal;a.Lang.isNull(b)?this.set("selectedWebsite",
null):this.set("selectedWebsite",b.get("model"))},this)}},{CSS_PREFIX:"sqs-website-list",ATTRS:{selectedWebsite:{value:null},defaultChildType:{value:a.Squarespace.Widgets.Website}}})},"1.0",{requires:["base","squarespace-widgets-website","squarespace-widgets-model-list","widget-child"]});YUI.add("squarespace-system-page",function(a){},"1.0",{requires:["squarespace-common","squarespace-dialog","squarespace-login","squarespace-modal-lightbox","squarespace-trial-alert-dialog"]});
YUI.add("squarespace-widgets-website-selector",function(a){a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.WebsiteSelector=a.Base.create("WebsiteSelector",a.Squarespace.Widgets.SSWidget,[a.WidgetParent],{initializer:function(){},renderUI:function(){c.superclass.renderUI.call(this);var b=this.get("title"),d=this.get("websites");d.isEmpty()&&(b="You do not have any existing websites, is this the right account?");var h=this.get("contentBox");a.Lang.isString(b)&&h.append(a.Node.create('<div class="select-title">'+
b+"</div>"));b=a.Node.create('<div class="member-account"></div><div class="websites"></div>');h.append(b);(new a.Squarespace.Widgets.MemberAccount({model:this.get("memberAccount"),boundingBox:h.one(".member-account")})).render();var d=this._segmentWebsites(d),f=h.one(".websites");a.Array.each(d,function(b){0<b.websites.size()&&(b=new a.Squarespace.Widgets.WebsiteList({models:b.websites,boundingBox:f,"strings.title":b.name}),this.add(b))},this)},bindUI:function(){c.superclass.bindUI.call(this);this.on("WebsiteList:selectedWebsiteChange",
function(b){a.Lang.isValue(b.newVal)&&this.set("selectedWebsite",b.newVal)},this)},_segmentWebsites:function(b){var c=new a.Squarespace.Models.ModelList,h=new a.Squarespace.Models.ModelList,f=new a.Squarespace.Models.ModelList,e=new a.Squarespace.Models.ModelList;b.each(function(b){switch(b.get("siteStatus")){case a.Squarespace.StatusConstants.PASTDUE:case a.Squarespace.StatusConstants.COMPED:case a.Squarespace.StatusConstants.ACTIVE:c.add(b);break;case a.Squarespace.StatusConstants.EXPIRED:h.add(b);
break;case a.Squarespace.StatusConstants.TRIAL:f.add(b);break;case a.Squarespace.StatusConstants.INTERNAL:e.add(b)}b.get("faviconURL")||b.set("faviconURL",b.authenticUrl+"/favicon.ico")});return[{name:"Internal",websites:e},{name:"Active",websites:c},{name:"Trial",websites:f},{name:"Expired",websites:h}]}},{CSS_PREFIX:"sqs-website-selector",ATTRS:{title:{validator:a.Squarespace.AttrValidators.isString,writeOnce:"initOnly"},memberAccount:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.MemberAccount),
writeOnce:"initOnly"},websites:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.ModelList),writeOnce:"initOnly"},selectedWebsite:{validator:a.Squarespace.AttrValidators.isInstanceOf(a.Model)}}})},"1.0",{requires:"base model squarespace-widgets-website-list squarespace-widgets-member-account squarespace-widgets-model-list squarespace-models-member-account widget-parent".split(" ")});
YUI.add("squarespace-widgets-model-list",function(a){a.namespace("Squarespace.Widgets");var c=a.Squarespace.Widgets.ModelList=a.Base.create("ModelList",a.Squarespace.Widgets.SSWidget,[a.WidgetParent,a.Squarespace.Mixins.Loadable],{destructor:function(){this._loadingTimer&&this._loadingTimer.cancel()},bindUI:function(){c.superclass.bindUI.call(this);var a=this.get("models");a.after("add",function(c){1===a.size()&&this._empty();this._addWidgetForModel(c.model)},this);a.after("remove",function(c){this._removeWidgetForModel(c.model);
a.isEmpty()&&this._renderEmptyState()},this);a.after("reset",this._renderLoadedState,this)},syncUI:function(){c.superclass.syncUI.call(this);this.get("loading")?this._renderLoadingState():this._renderLoadedState()},_renderLoadingState:function(){this._loadingTimer&&this._loadingTimer.cancel();this._loadingTimer=a.later(500,this,function(){this._empty();new a.Squarespace.Spinner({render:this.get("contentBox"),size:44,color:"dark"})})},_renderLoadedState:function(){this._loadingTimer&&this._loadingTimer.cancel();
this._empty();var a=this.get("models");a.isEmpty()?this._renderEmptyState():a.each(this._addWidgetForModel,this)},_renderEmptyState:function(){var b=this.get("emptyStateIconSrc"),c=this.get("strings.modelName")+"s",h=a.Node.create('<div class="no-models"></div>');a.Lang.isValue(b)&&""!==b&&h.append('<img class="icon large" src="'+b+'" />');h.append('<div class="no-models-text">There are no '+c+".</div>");this.get("contentBox").append(h)},_empty:function(){this.removeAll().each(function(a){a.destroy()});
this._childrenContainer.empty()},_addWidgetForModel:function(a){var c=this.get("models").indexOf(a);this.add({model:a},c)},_removeWidgetForModel:function(a){var c;this.some(function(h){if(h.get("model")===a)return c=h,!0})&&c.destroy()}},{CSS_PREFIX:"sqs-model-list",ATTRS:{models:{valueFn:function(){return new a.Squarespace.Models.ModelList},validator:a.Squarespace.AttrValidators.isInstanceOf(a.Squarespace.Models.ModelList),writeOnce:"initOnly"},emptyStateIconSrc:{value:null,validator:a.Squarespace.AttrValidators.isNullOrString,
writeOnce:"initOnly"},loadable:{getter:function(){return this.get("models")},readOnly:!0},strings:{value:{modelName:"model"},validator:function(b){return!a.Lang.isObject(b)?(console.error('ModelList: Invalid "strings" attribute. Must be an object.'),!1):!a.Object.hasKey(b,"modelName")?(console.error('ModelList: Invalid "strings" attribute. Must have key "modelName".'),!1):!0},writeOnce:"initOnly"},defaultChildType:{value:a.Squarespace.Widgets.Model,writeOnce:"initOnly"}}})},"1.0",{requires:"base event-custom squarespace-attr-validators squarespace-mixins-loadable squarespace-models-model-list squarespace-spinner squarespace-ss-widget squarespace-widgets-model widget-parent".split(" ")});
YUI.add("squarespace-models-model-list",function(a){a.namespace("Squarespace.Models");var c=a.Squarespace.Models.ModelList=a.Base.create("ModelList",a.ModelList,[a.Squarespace.ModelSync.REST],{parse:function(b){b=c.superclass.parse.call(this,b);var d=this._getResponseAttrs(b);a.Object.each(d,function(a,b){this._set(b,a)},this);return b.results},_getResponseAttrs:function(a){return{}}})},"1.0",{requires:["base","model-list","squarespace-model-sync-rest"]});
YUI.add("squarespace-dialog-text",function(a){var c=a.namespace("Squarespace.DialogFields").Text=a.Base.create("text",a.Squarespace.DialogField2,[],{renderUI:function(){c.superclass.renderUI.call(this);var a=this.get("name"),b=this.get("autocompleteType");this._textField=this.get("contentBox").one("input[type]");this.get("dialog")&&this._textField.setAttribute("tabindex",this.get("dialog").getNextTabIndex());this._textField.set("type",this.get("password")?"password":"text");a&&this._textField.setAttribute("name",
a);b&&this._textField.setAttribute("x-autocompletetype",b);this._set("errorFlyoutAnchor",this._textField);this._textField.set("value",this.get("data"))},bindUI:function(){c.superclass.bindUI.call(this);this.get("id");this.after("dataChange",this._afterDataChange,this);this._textField.after("valuechange",this._afterValueChange,this);var b=this._textField.getDOMNode(),d="addEventListener";a.Lang.isFunction(b.attachEvent)&&(d="attachEvent");b[d]("focus",a.bind(this._afterFocus,this));b[d]("blur",a.bind(this._afterBlur,
this));this._textField.on("click",function(a){a.halt()});this._textField.after("keyup",function(a){13===a.keyCode&&this.get("submitOnEnter")&&(this.fire("submit"),(a=this.get("dialog"))&&a.saveAndClose())},this);this._textField.on("keypress",this.applyKeyFilter,this);!0===this.get("mailcheck")&&this._textField.plug(a.Squarespace.Plugin.MailCheck,{field:this});this.on("readOnlyChange",function(a){a.newVal?this._textField.setAttribute("readonly","readonly"):this._textField.removeAttribute("readonly")},
this)},syncUI:function(){c.superclass.syncUI.call(this);var a=this.get("strings.placeholder");a&&this._textField.setAttribute("placeholder",a);this.get("disabled")?this._textField.setAttribute("disabled","disabled"):this._textField.removeAttribute("disabled")},getErrors:function(){var a=this.get("data");return this.get("validator")(a)?this.get("required")&&this.isEmpty()?[this.get("strings.requiredFieldEmptyMessage")]:[]:[this.get("strings.validationFailMessage")]},isEmpty:function(){return""===this.get("data")},
focus:function(){c.superclass.focus.call(this);this.get("rendered")&&this._textField.focus()},select:function(){this.get("rendered")&&this._textField.select()},blur:function(){c.superclass.blur.call(this);this.get("rendered")&&this._textField.blur()},disable:function(){c.superclass.disable.call(this);this.get("rendered")&&this._textField.setAttribute("disabled","disabled")},enable:function(){c.superclass.enable.call(this);this.get("rendered")&&this._textField.removeAttribute("disabled")},applyKeyFilter:function(b){var c=
this.get("keyFilter"),d=this.get("keyFilterExplanation"),h;if(c&&(0===a.UA.gecko||b._event.isChar))h=String.fromCharCode(b.which),!h.match(RegExp(c))&&0<h.length&&(d&&this.showError(d),b.halt())},_afterDataChange:function(a){a.dataSync||this._textField.set("value",a.newVal||"",{dataSync:!0});this.hideError()},_afterValueChange:function(a){a.dataSync||this.set("data",a.newVal,{dataSync:!0})},_afterFocus:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",!0);a.UA.ie||
this.focus()},_afterBlur:function(){"undefined"!==typeof CONFIG_PANEL&&CONFIG_PANEL.set("allowContextMenu",!1);this.set("data",this._textField.get("value"),{dataSync:!0});this.blur()}},{CSS_PREFIX:"sqs-text",HANDLEBARS_TEMPLATE:"dialog-text.html",ATTRS:{strings:{value:{placeholder:"",validationFailMessage:"This must be a string.",requiredFieldEmptyMessage:"This is a required field."}},data:{value:"",setter:function(b){a.Lang.isValue(b)||(b="");return b},validator:function(b){return a.Lang.isString(b)||
!a.Lang.isValue(b)}},validator:{value:a.Lang.isString},password:{value:!1,validator:a.Lang.isBoolean},submitOnEnter:{value:!1,validator:a.Lang.isBoolean},disabled:{value:!1,validator:a.Lang.isBoolean},autocompleteType:a.Squarespace.AutocompleteTypeATTR,mailcheck:{value:!1,validator:a.Lang.isBoolean},keyFilter:{},keyFilterExplanation:{value:""},maxLength:{value:null},readOnly:{value:!1},selectAllOnFocus:{value:!1}}});a.Squarespace.DialogFields.LabeledText=a.Base.create("labeledText",a.Squarespace.DialogFields.Text,
[a.Squarespace.DialogFields.DialogFieldLabel],{},{CSS_PREFIX:"sqs-labeled-text",LABEL_CONFIG:{forNode:"input[type]"}});var b=a.Squarespace.DialogFields.MoneyText=a.Base.create("moneyText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){b.superclass.renderUI.call(this);this.get("contentBox").one("input").plug(a.Squarespace.Plugin.MoneyFormatter)},bindUI:function(){var a=this.get("contentBox").one("input");a.on("valuechange",function(){this.set("data",a.moneyFormatterPlugin.get("data"))},this)}},
{CSS_PREFIX:"sqs-money-text",LABEL_CONFIG:{forNode:"input[type]"},ATTRS:{data:{value:0,validator:a.Lang.isNumber},validator:{value:a.Lang.isNumber},prefixUnit:{valueFn:function(){return a.Squarespace.Commerce.currencySymbol()}}}}),d=a.Squarespace.DialogFields.Email=a.Base.create("emailText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){d.superclass.renderUI.call(this);this.get("contentBox").one("input").setAttribute("type","email")}},{CSS_PREFIX:"sqs-email-text",ATTRS:{mailcheck:{value:!0}}}),
h=a.Squarespace.DialogFields.Url=a.Base.create("urlText",a.Squarespace.DialogFields.Text,[],{renderUI:function(){h.superclass.renderUI.call(this);this._textField.wrap('<div class="sqs-input-wrapper-content"></div>');var a=this.get("contentBox").one(".sqs-input-wrapper-content");a.wrap('<div class="sqs-input-wrapper"></div>');a.prepend('<div class="prefix">'+this.get("prefix")+"</div>")},bindUI:function(){h.superclass.bindUI.call(this);this._textField.after("keyup",this.onKeyUp,this)},onKeyUp:function(b){var c=
this.get("filter"),d;if("url-slug"===c||"url-slug-with-slash"==c)d=this._textField.get("value"),c="url-slug"===c?a.Squarespace.Utils.createUrl(d):a.Squarespace.Utils.createUrlWithSlash(d),b=this._textField.selectionStart-(32==b.keyCode?0:1),d!=c&&(this._textField.set("value",c),this._textField.selectionStart=b,this._textField.selectionEnd=b)}},{CSS_PREFIX:"sqs-url-text",ATTRS:{filter:{value:"url-slug-with-slash"},prefix:{value:"/"}}})},"1.0",{requires:"base base-build event-valuechange squarespace-dialog-field-2 squarespace-autocomplete-types squarespace-dialog-text-template squarespace-dialog-label squarespace-mailcheck squarespace-attr-validators".split(" ")});
YUI.add("datatype-number-parse",function(a,c){var b=a.Escape.regex;a.mix(a.namespace("Number"),{_buildParser:a.cached(function(a,c,f,e){var g=[],k;a&&g.push("^\\s*"+b(a)+"\\s*");c&&g.push("\\s*"+b(c)+"\\s*$");f&&g.push(b(f)+"(?=\\d)");k=RegExp("(?:"+g.join("|")+")","g");"."===e&&(e=null);return function(a){a=a.replace(k,"");return e?a.replace(e,"."):a}}),parse:function(b,c){var f;c&&"string"===typeof b&&(f=this._buildParser(c.prefix,c.suffix,c.thousandsSeparator,c.decimalSeparator),b=f(b));"string"===
typeof b&&""!==a.Lang.trim(b)&&(b=+b);if("number"!==typeof b||!isFinite(b))b=null;return b}});a.namespace("Parsers").number=a.Number.parse;a.namespace("DataType");a.DataType.Number=a.Number},"3.17.2",{requires:["escape"]});
YUI.add("squarespace-modal-dialog",function(a){a.namespace("Squarespace.Widgets").ModalDialog=a.Base.create("modalDialog",a.Widget,[a.WidgetParent,a.WidgetStack],{renderUI:function(){this.get("boundingBox").addClass("fade");this.get("contentBox").append('<header class="modal-dialog-title"></header><section class="modal-dialog-body"></section><footer class="modal-dialog-controls"></footer>');this._childrenContainer=this.get("contentBox").one(".modal-dialog-body")},bindUI:function(){this.get("contentBox");
this.after("visibleChange",this.syncUI,this);this.after("stringsChange",this.syncUI,this)},syncUI:function(){var c=this.get("contentBox");c.one(".modal-dialog-title").setContent(this.get("strings.title"));this.get("boundingBox").toggleClass("in",this.get("visible"));c=c.one(".modal-dialog-controls");c.empty();a.Array.each(this.get("buttons"),c.append,c)},_fadeAndDestroy:function(){this.hide();a.later(350,this,this.destroy)},_spawnChild:function(c){if(!a.instanceOf(c,a.Widget))throw"Can only spawn widget children.";
c.addTarget(this);this.hide();a.later(350,this,function(){c.once("destroy",function(){this.show()},this);c.show()})}},{CSS_PREFIX:"sqs-modal-dialog",ATTRS:{strings:{value:{title:""}},buttons:{value:[]},zIndex:{value:3E4}}})},"1.0",{requires:["base","widget","widget-parent","widget-stack","squarespace-responsive-modal"]});
YUI.add("squarespace-widgets-password-recovery-template",function(a){var c=a.Handlebars;(function(){var a=c.template;(c.templates=c.templates||{})["widgets-password-recovery.html"]=a(function(a,b,c,e,g){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);g=g||{};e=this.escapeExpression;a='<div class="password-recovery-wrapper state-';(c=c.state)?c=c.call(b,{hash:{},data:g}):(c=b.state,c="function"===typeof c?c.apply(b):c);return a+=e(c)+'">\n  <h1>Password Reset</h1>\n  <div class="form">\n    <div data-field-name="description"></div>\n    <div data-field-name="email"></div>\n    <div class="buttons">\n      <a class="cancel" data-action="cancel">Cancel</a>\n      <div class="submit" data-action="submit">Send Email</div>\n    </div>\n  </div>\n  <div class="sending">\n  </div>\n  <div class="sent">\n    <div data-field-name="sent-description"></div>\n    <div class="buttons">\n      <input class="cancel" type="button" data-action="cancel" value="Back to Login">\n    </div>\n  </div>\n</div>\n'})})();
a.Handlebars.registerPartial("widgets-password-recovery.html".replace("/","."),c.templates["widgets-password-recovery.html"])},"1.0",{requires:["handlebars-base"]});var hexcase=0,b64pad="=",chrsz=8;function hex_sha1(a){return binb2hex(core_sha1(str2binb(a),a.length*chrsz))}function b64_sha1(a){return binb2b64(core_sha1(str2binb(a),a.length*chrsz))}function str_sha1(a){return binb2str(core_sha1(str2binb(a),a.length*chrsz))}function hex_hmac_sha1(a,c){return binb2hex(core_hmac_sha1(a,c))}
function b64_hmac_sha1(a,c){return binb2b64(core_hmac_sha1(a,c))}function str_hmac_sha1(a,c){return binb2str(core_hmac_sha1(a,c))}function sha1_vm_test(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==hex_sha1("abc")}
function core_sha1(a,c){a[c>>5]|=128<<24-c%32;a[(c+64>>9<<4)+15]=c;for(var b=Array(80),d=1732584193,h=-271733879,f=-1732584194,e=271733878,g=-1009589776,k=0;k<a.length;k+=16){for(var m=d,r=h,n=f,s=e,p=g,q=0;80>q;q++){b[q]=16>q?a[k+q]:rol(b[q-3]^b[q-8]^b[q-14]^b[q-16],1);var t=safe_add(safe_add(rol(d,5),sha1_ft(q,h,f,e)),safe_add(safe_add(g,b[q]),sha1_kt(q))),g=e,e=f,f=rol(h,30),h=d,d=t}d=safe_add(d,m);h=safe_add(h,r);f=safe_add(f,n);e=safe_add(e,s);g=safe_add(g,p)}return[d,h,f,e,g]}
function sha1_ft(a,c,b,d){return 20>a?c&b|~c&d:40>a?c^b^d:60>a?c&b|c&d|b&d:c^b^d}function sha1_kt(a){return 20>a?1518500249:40>a?1859775393:60>a?-1894007588:-899497514}function core_hmac_sha1(a,c){var b=str2binb(a);16<b.length&&(b=core_sha1(b,a.length*chrsz));for(var d=Array(16),h=Array(16),f=0;16>f;f++)d[f]=b[f]^909522486,h[f]=b[f]^1549556828;b=core_sha1(d.concat(str2binb(c)),512+c.length*chrsz);return core_sha1(h.concat(b),672)}
function safe_add(a,c){var b=(a&65535)+(c&65535);return(a>>16)+(c>>16)+(b>>16)<<16|b&65535}function rol(a,c){return a<<c|a>>>32-c}function str2binb(a){for(var c=[],b=(1<<chrsz)-1,d=0;d<a.length*chrsz;d+=chrsz)c[d>>5]|=(a.charCodeAt(d/chrsz)&b)<<24-d%32;return c}function binb2str(a){for(var c="",b=(1<<chrsz)-1,d=0;d<32*a.length;d+=chrsz)c+=String.fromCharCode(a[d>>5]>>>24-d%32&b);return c}
function binb2hex(a){for(var c=hexcase?"0123456789ABCDEF":"0123456789abcdef",b="",d=0;d<4*a.length;d++)b+=c.charAt(a[d>>2]>>8*(3-d%4)+4&15)+c.charAt(a[d>>2]>>8*(3-d%4)&15);return b}function binb2b64(a){for(var c="",b=0;b<4*a.length;b+=3)for(var d=(a[b>>2]>>8*(3-b%4)&255)<<16|(a[b+1>>2]>>8*(3-(b+1)%4)&255)<<8|a[b+2>>2]>>8*(3-(b+2)%4)&255,h=0;4>h;h++)c=8*b+6*h>32*a.length?c+b64pad:c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>6*(3-h)&63);return c}
YUI.add("thirdparty-sha1",function(a){},"2.97.0");
